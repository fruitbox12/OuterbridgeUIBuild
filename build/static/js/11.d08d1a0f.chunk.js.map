{"version":3,"sources":["api/workflows.js","views/canvas/CanvasNode.js","views/canvas/ButtonEdge.js","ui-component/extended/Transitions.js","ui-component/dialog/AttachmentDialog.js","ui-component/dialog/HTMLDialog.js","hooks/useConfirm.js","api/executions.js","views/executions/index.js","menu-items/settings.js","views/settings/index.js","ui-component/dialog/SaveWorkflowDialog.js","views/canvas/CanvasHeader.js","views/canvas/AddNodes.js","api/nodes.js","views/output/OutputResponses.js","views/canvas/VariableSelector.js","views/canvas/EditNodes.js","ui-component/dialog/ConfirmDialog.js","ui-component/dialog/TestWorkflowDialog.js","api/webhooks.js","views/canvas/index.js"],"names":["getAllWorkflows","client","get","getSpecificWorkflow","shortId","createNewWorkflow","body","post","updateWorkflow","put","deployWorkflow","deleteWorkflow","delete","testWorkflow","startingNodeId","CardWrapper","styled","MainCard","theme","backgroundColor","border","color","darkTextPrimary","width","height","padding","boxShadow","borderColor","palette","primary","main","handlerPosition","CanvasNode","data","useTheme","content","sx","selected","text","secondary","outputResponses","submit","Avatar","variant","typography","smallAvatar","borderRadius","background","success","dark","ml","position","top","right","needRetest","warning","Box","inputAnchors","map","inputAnchor","index","type","Position","Top","id","style","left","length","display","flexDirection","alignItems","item","marginRight","commonAvatar","largeAvatar","cursor","src","baseURL","name","alt","Typography","fontSize","fontWeight","label","outputAnchors","outputAnchor","Bottom","bottom","ButtonEdge","sourceX","sourceY","targetX","targetY","sourcePosition","targetPosition","markerEnd","edgePath","getBezierPath","getEdgeCenter","edgeCenterX","edgeCenterY","dispatch","useDispatch","className","d","x","y","labelStyle","fill","labelBgStyle","labelBgPadding","labelBgBorderRadius","foreignObjectSize","requiredExtensions","onClick","event","evt","stopPropagation","REMOVE_EDGE","edgeId","onEdgeClick","Transitions","forwardRef","ref","children","direction","others","positionSX","transformOrigin","Grow","Collapse","Fade","timeout","appear","enter","exit","Slide","Zoom","defaultProps","TabPanel","props","value","other","role","hidden","p","AttachmentDialog","show","dialogProps","onCancel","portalElement","document","getElementById","useState","setValue","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","log","parseFloat","pow","toFixed","component","Dialog","open","onClose","fullWidth","maxWidth","DialogTitle","title","DialogContent","Tabs","onChange","newValue","executionData","execObj","execObjIndex","Tab","attachments","attachment","attchIndex","marginBottom","justifyContent","filename","contentType","size","href","download","rel","target","borderStyle","minHeight","minWidth","createPortal","resolveCallback","HTMLDialog","html","overflow","dangerouslySetInnerHTML","__html","useConfirm","useContext","ConfirmContext","confirmState","closeConfirm","HIDE_CONFIRM","confirm","confirmPayload","SHOW_CONFIRM","payload","Promise","res","onConfirm","Executions","workflowShortId","execution","executionCount","isExecutionOpen","anchorEl","expanded","setExpanded","setOpen","showHTMLDialog","setShowHTMLDialog","HTMLDialogProps","setHTMLDialogProps","showAttachmentDialog","setShowAttachmentDialog","attachmentDialogProps","setAttachmentDialogProps","showExpandDialog","setShowExpandDialog","expandDialogProps","setExpandDialogProps","varPrevOpen","useRef","useNotifier","enqueueSnackbar","enqueueSnackbarAction","closeSnackbar","closeSnackbarAction","setChipBgColor","execState","light","error","grey","deleteExecution","e","executionShortId","description","confirmButtonName","cancelButtonName","executionsApi","workflowsApi","workflowResponse","SET_WORKFLOW","workflow","message","options","key","Date","getTime","random","action","Button","errorData","response","status","statusText","persist","useEffect","current","Popper","placement","undefined","transition","disablePortal","popperOptions","modifiers","offset","zIndex","TransitionProps","in","Paper","elevation","shadow","shadows","Stack","maxHeight","overflowX","List","py","breakpoints","down","my","pl","exec","Accordion","isExpanded","AccordionSummary","expandIcon","mr","mb","state","Chip","moment","createdDate","format","IconButton","JSON","parse","execData","execDataIndex","AccordionDetails","nodeLabel","collapsed","enableClipboard","copyToClipboard","dialogProp","onExpandDialogClicked","mt","pb","ExpandDataDialog","icons","IconTrash","IconFileUpload","IconFileExport","settings","url","icon","Settings","isSettingsOpen","onSettingsItemClick","onUploadFile","settingsMenu","setSettingsMenu","filter","menu","items","NavItem","level","navType","SaveWorkflowDialog","workflowName","setWorkflowName","isReadyToSave","setIsReadyToSave","OutlinedInput","placeholder","DialogActions","disabled","CanvasHeader","handleSaveFlow","handleDeployWorkflow","handleStopWorkflow","handleDeleteWorkflow","handleLoadWorkflow","navigate","useNavigate","workflowNameRef","viewExecutionRef","settingsRef","isEditingWorkflowName","setEditingWorkflowName","setExecutionOpen","setSettingsOpen","workfowDialogOpen","setWorkfowDialogOpen","updateWorkflowApi","useApi","canvas","useSelector","ButtonBase","mediumAvatar","stroke","flexGrow","isDirty","orange","deployed","TextField","inputRef","defaultValue","updateBody","request","setting","flowData","dataStr","stringify","generateExportFlowData","dataUri","encodeURIComponent","exportFileDefaultName","linkElement","createElement","setAttribute","click","console","file","AddNodes","nodesData","node","customization","searchValue","setSearchValue","nodes","setNodes","anchorRef","prevOpen","handleClose","contains","focus","Fab","ClickAwayListener","onClickAway","pr","setTimeout","returnData","nd","toLowerCase","includes","startAdornment","InputAdornment","inputProps","Divider","onDragStart","dataTransfer","setData","effectAllowed","draggable","ListItemButton","ListItem","ListItemAvatar","objectFit","ListItemText","OutputResponses","nodeId","nodeParamsType","nodeFlowData","edges","onSubmit","outputResponse","setOutputResponse","errorResponse","setErrorResponse","nodeName","setNodeName","nodeType","setNodeType","setNodeLabel","isTestNodeBtnDisabled","disableTestNodeBtn","testNodeLoading","setTestNodeLoading","testNodeApi","nodesApi","output","paramsTypes","paramType","checkIfTestNodeValid","selectedNode","find","testNodeData","errorMessage","loading","webhookEndpoint","spacing","startIcon","navigator","clipboard","writeText","window","respObj","respObjIndex","openAttachmentDialog","AnimateButton","disableElevation","alert","testNodeBody","socket","socketIOClient","on","clientId","disconnect","onTestNodeClick","CircularProgress","marginTop","marginLeft","VariableSelector","isVariableSelectorOpen","onVariableSelected","onClipboardCopy","namespaces","namespace","returnVariablePath","test","endsWith","substring","onCopyClick","EditNodes","onNodeLabelUpdate","onNodeValuesUpdate","setNodeFlowData","nodeDetails","setNodeDetails","nodeParams","setNodeParams","setNodeParamsType","nodeParamsInitialValues","setNodeParamsInitialValues","nodeParamsValidation","setNodeParamsValidation","setVariableSelectorOpen","variableBody","setVariableBody","availableNodesForVariable","setAvailableNodesForVariable","isEditVariableDialogOpen","setEditVariableDialog","editVariableDialogProps","setEditVariableDialogProps","ps","getSpecificNodeApi","scrollTop","curr","handleAccordionChange","paramsType","handleNodeLabelChange","saveNodeLabel","onEditVariableDialogOpen","input","values","arrayItemBody","variableNodesIds","getAvailableNodeIdsForVariable","nodesForVariable","push","setVariableSelectorState","variableSelectorState","paramsChanged","formParams","credentialMethodParam","param","credentialMethodParamIndex","findIndex","originalParam","updateNodeDetails","valueChanged","formValues","updateNodeFlowData","outputResponsesFlowData","indexOf","showHideParameters","displayType","toBeDeleteParams","displayOptions","Object","keys","forEach","path","comparisonValue","replace","groundValue","lodash","Array","isArray","RegExp","displayParameters","params","arrayIndex","arrayInitialValue","inputArray","j","array","arrayParams","hide","returnParams","prm","showHideOptions","returnOptions","toBeDeleteOptions","option","opt","clonedParams","initializeFormValuesAndParams","initialValues","reorganizedParams","cloneDeep","handleCredentialParams","default","newObj","validationSchema","inputOptional","optional","Yup","required","matches","numberOrExpressionRegex","setYupValidation","actions","networks","credentials","inputParameters","containerRef","el","pt","textAlign","InputParameters","CredentialInput","initialParams","initialValidation","newInput","textBeforeCursorPosition","textAfterCursorPosition","clonedNodeFlowData","set","EditVariableDialog","updateValues","ConfirmDialog","DialogContentText","TestWorkflowDialog","onItemClick","nodeTypes","customNode","edgeTypes","buttonedge","Canvas","URLpath","location","pathname","toString","split","startsWith","canvasDataStore","setCanvasDataStore","setWorkflow","isTestWorkflowDialogOpen","setTestWorkflowDialogOpen","testWorkflowDialogProps","setTestWorkflowDialogProps","isTestingWorkflow","setIsTestingWorkflow","useNodesState","onNodesChange","useEdgesState","setEdges","onEdgesChange","rfInstance","setRfInstance","setSelectedNode","reactFlowWrapper","getNodesApi","removeTestTriggersApi","deleteAllTestWebhooksApi","webhooksApi","createNewWorkflowApi","testWorkflowApi","getSpecificWorkflowApi","rfInstanceObject","toObject","newWorkflowBody","savedWorkflowResponse","REMOVE_DIRTY","deployedWorkflowResponse","halt","stoppedWorkflowResponse","onNodeDoubleClick","useCallback","clickedNode","nds","checkIfNodeLabelUnique","getNodes","setDirty","onDragOver","preventDefault","dropEffect","onDrop","reactFlowBounds","getBoundingClientRect","nodeData","getData","checkMultipleTriggers","generateWebhookEndpoint","project","clientX","clientY","newNodeId","getUniqueNodeId","newNode","addAnchors","concat","saveWorkflowSuccess","SET_DIRTY","initialFlow","history","replaceState","getEdges","edge","removeEdgeId","usePrompt","AppBar","enableColorOnDark","bgcolor","Toolbar","onNodeDragStop","onConnect","newEdge","source","sourceHandle","targetHandle","getEdgeLabelName","eds","addEdge","onInit","fitView","nodeStrokeColor","nodeColor","nodeBorderRadius","transform","gap","outputValues"],"mappings":"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","file":"static/js/11.d08d1a0f.chunk.js","sourcesContent":["import client from \"./client\";\r\n\r\nconst getAllWorkflows = () => client.get(\"/workflows\");\r\n\r\nconst getSpecificWorkflow = (shortId) => client.get(`/workflows/${shortId}`);\r\n\r\nconst createNewWorkflow = (body) => client.post(`/workflows`, body); //body: IWorkflow\r\n\r\nconst updateWorkflow = (shortId, body) => client.put(`/workflows/${shortId}`, body); //body: IWorkflow\r\n\r\nconst deployWorkflow = (shortId, body) => client.post(`/workflows/deploy/${shortId}`, body || {}); //body: { halt: boolean }\r\n\r\nconst testWorkflow = (startingNodeId, body) => client.post(`/workflows/test/${startingNodeId}`, body); //body: ITestWorkflowBody\r\n\r\nconst deleteWorkflow = (shortId) => client.delete(`/workflows/${shortId}`);\r\n\r\nexport default {\r\n    getAllWorkflows,\r\n    getSpecificWorkflow,\r\n    createNewWorkflow,\r\n    updateWorkflow,\r\n    deployWorkflow,\r\n    deleteWorkflow,\r\n    testWorkflow\r\n};\r\n","import PropTypes from 'prop-types';\r\nimport { Handle, Position } from 'react-flow-renderer';\r\n\r\n// material-ui\r\nimport { styled, useTheme } from '@mui/material/styles';\r\nimport { Avatar, Box, Typography } from '@mui/material';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\n\r\n// icons\r\nimport { IconCheck, IconExclamationMark } from '@tabler/icons';\r\n\r\n// const\r\nimport { baseURL } from 'store/constant';\r\n\r\nconst CardWrapper = styled(MainCard)(({ theme }) => ({\r\n    backgroundColor: '#ffffff',\r\n    border: 'solid 1px',\r\n    color: theme.darkTextPrimary,\r\n    width: '200px',\r\n    height: 'auto',\r\n    padding: '10px',\r\n    boxShadow: '0 2px 14px 0 rgb(32 40 45 / 8%)',\r\n    '&:hover': {\r\n        borderColor: theme.palette.primary.main\r\n    },\r\n}));\r\n\r\nconst handlerPosition = [\r\n    [['50%']],\r\n    [['30%'], ['70%']],\r\n];\r\n\r\n// ===========================|| CANVAS NODE ||=========================== //\r\n\r\nconst CanvasNode = ({ data }) => {\r\n    const theme = useTheme();\r\n\r\n    return (\r\n        <>\r\n            <CardWrapper \r\n                content={false} \r\n                sx={{\r\n                    borderColor: data.selected ? theme.palette.primary.main : theme.palette.text.secondary\r\n                }} \r\n                border={false}\r\n            >\r\n                {data && data.outputResponses && data.outputResponses.submit && (\r\n                    <Avatar\r\n                        variant=\"rounded\"\r\n                        sx={{\r\n                            ...theme.typography.smallAvatar,\r\n                            borderRadius: '50%',\r\n                            background: theme.palette.success.dark,\r\n                            color: 'white',\r\n                            ml: 2,\r\n                            position: 'absolute',\r\n                            top: -10,\r\n                            right: -10\r\n                        }}\r\n                    >\r\n                        <IconCheck />\r\n                    </Avatar>\r\n                )}\r\n                \r\n                {data && data.outputResponses && data.outputResponses.needRetest && (\r\n                    <Avatar\r\n                        variant=\"rounded\"\r\n                        sx={{\r\n                            ...theme.typography.smallAvatar,\r\n                            borderRadius: '50%',\r\n                            background: theme.palette.warning.dark,\r\n                            color: 'white',\r\n                            ml: 2,\r\n                            position: 'absolute',\r\n                            top: -10,\r\n                            right: -10\r\n                        }}\r\n                    >\r\n                        <IconExclamationMark />\r\n                    </Avatar>\r\n                )}\r\n              \r\n                <Box>\r\n                    {data.inputAnchors.map((inputAnchor, index) => (\r\n                        <Handle \r\n                            type=\"target\"\r\n                            position={Position.Top} \r\n                            key={inputAnchor.id} \r\n                            id={inputAnchor.id} \r\n                            style={{ \r\n                                height: 15,\r\n                                width: 15,\r\n                                top: -7.5,\r\n                                backgroundColor: data.selected ? theme.palette.primary.main : theme.palette.text.secondary,\r\n                                left: handlerPosition[data.inputAnchors.length-1][index]\r\n                            }} \r\n                        />\r\n                    ))}\r\n                    <div style={{display: 'flex', flexDirection: 'row', alignItems: 'center'}}>\r\n                        <Box item style={{width: 50, marginRight: 10}}>\r\n                            <div\r\n                                style={{\r\n                                    ...theme.typography.commonAvatar,\r\n                                    ...theme.typography.largeAvatar,\r\n                                    backgroundColor: 'white',\r\n                                    cursor: 'grab'\r\n                                }}\r\n                            >\r\n                                <img style={{ width: '100%', height: '100%' }} src={`${baseURL}/api/v1/node-icon/${data.name}`} alt=\"Notification\" />\r\n                            </div>\r\n                        </Box>\r\n                        <Box>\r\n                            <Typography\r\n                                sx={{\r\n                                    fontSize: '1rem',\r\n                                    fontWeight: 500,\r\n                                }}\r\n                            >\r\n                                {data.label}\r\n                            </Typography>\r\n                        </Box>\r\n                    </div>\r\n                    {data.outputAnchors.map((outputAnchor, index) => (\r\n                        <Handle \r\n                            type=\"source\" \r\n                            position={Position.Bottom} \r\n                            key={outputAnchor.id} \r\n                            id={outputAnchor.id} \r\n                            style={{ \r\n                                height: 15,\r\n                                width: 15,\r\n                                bottom: -7.5,\r\n                                backgroundColor: data.selected ? theme.palette.primary.main : theme.palette.text.secondary,\r\n                                left: handlerPosition[data.outputAnchors.length-1][index] \r\n                            }} \r\n                        />\r\n                    ))}\r\n                </Box>\r\n            </CardWrapper>\r\n        </>\r\n    );\r\n};\r\n\r\nCanvasNode.propTypes = {\r\n    data: PropTypes.object,\r\n};\r\n\r\nexport default CanvasNode;\r\n","import { getBezierPath, getEdgeCenter,  EdgeText } from 'react-flow-renderer';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch } from 'react-redux';\r\nimport { REMOVE_EDGE } from 'store/actions';\r\n\r\nimport './index.css';\r\n\r\nconst foreignObjectSize = 40;\r\n\r\nconst ButtonEdge = ({ \r\n    id,\r\n    sourceX,\r\n    sourceY,\r\n    targetX,\r\n    targetY,\r\n    sourcePosition,\r\n    targetPosition,\r\n    style = {},\r\n    data,\r\n    markerEnd\r\n}) => {\r\n\r\n    const edgePath = getBezierPath({\r\n        sourceX,\r\n        sourceY,\r\n        sourcePosition,\r\n        targetX,\r\n        targetY,\r\n        targetPosition,\r\n    });\r\n\r\n    const [edgeCenterX, edgeCenterY] = getEdgeCenter({\r\n        sourceX,\r\n        sourceY,\r\n        targetX,\r\n        targetY,\r\n    });\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onEdgeClick = (evt, id) => {\r\n        evt.stopPropagation();\r\n        dispatch({ type: REMOVE_EDGE, edgeId: id });\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <path\r\n                id={id}\r\n                style={style}\r\n                className=\"react-flow__edge-path\"\r\n                d={edgePath}\r\n                markerEnd={markerEnd}\r\n            />\r\n            {data && data.label && \r\n            <EdgeText\r\n                x={sourceX + 10}\r\n                y={sourceY + 10}\r\n                label={data.label}\r\n                labelStyle={{ fill: 'black' }}\r\n                labelBgStyle={{ fill: 'transparent' }}\r\n                labelBgPadding={[2, 4]}\r\n                labelBgBorderRadius={2}\r\n            />}\r\n            <foreignObject\r\n                width={foreignObjectSize}\r\n                height={foreignObjectSize}\r\n                x={edgeCenterX - foreignObjectSize / 2}\r\n                y={edgeCenterY - foreignObjectSize / 2}\r\n                className=\"edgebutton-foreignobject\"\r\n                requiredExtensions=\"http://www.w3.org/1999/xhtml\"\r\n            >\r\n                <div>\r\n                    <button type=\"button\" className=\"edgebutton\" onClick={(event) => onEdgeClick(event, id)}>\r\n                        \r\n                    </button>\r\n                </div>\r\n            </foreignObject>\r\n        </>\r\n    );\r\n}\r\n\r\nButtonEdge.propTypes = {\r\n    id: PropTypes.string,\r\n    sourceX: PropTypes.number,\r\n    sourceY: PropTypes.number,\r\n    targetX: PropTypes.number,\r\n    targetY: PropTypes.number,\r\n    sourcePosition: PropTypes.any,\r\n    targetPosition: PropTypes.any,\r\n    style: PropTypes.object,\r\n    data: PropTypes.object,\r\n    markerEnd: PropTypes.any,\r\n};\r\n\r\nexport default ButtonEdge;\r\n","import PropTypes from 'prop-types';\r\nimport { forwardRef } from 'react';\r\n\r\n// material-ui\r\nimport { Collapse, Fade, Box, Grow, Slide, Zoom } from '@mui/material';\r\n\r\n// ==============================|| TRANSITIONS ||============================== //\r\n\r\nconst Transitions = forwardRef(({ children, position, type, direction, ...others }, ref) => {\r\n    let positionSX = {\r\n        transformOrigin: '0 0 0'\r\n    };\r\n\r\n    switch (position) {\r\n        case 'top-right':\r\n            positionSX = {\r\n                transformOrigin: 'top right'\r\n            };\r\n            break;\r\n        case 'top':\r\n            positionSX = {\r\n                transformOrigin: 'top'\r\n            };\r\n            break;\r\n        case 'bottom-left':\r\n            positionSX = {\r\n                transformOrigin: 'bottom left'\r\n            };\r\n            break;\r\n        case 'bottom-right':\r\n            positionSX = {\r\n                transformOrigin: 'bottom right'\r\n            };\r\n            break;\r\n        case 'bottom':\r\n            positionSX = {\r\n                transformOrigin: 'bottom'\r\n            };\r\n            break;\r\n        case 'top-left':\r\n        default:\r\n            positionSX = {\r\n                transformOrigin: '0 0 0'\r\n            };\r\n            break;\r\n    }\r\n\r\n    return (\r\n        <Box ref={ref}>\r\n            {type === 'grow' && (\r\n                <Grow {...others}>\r\n                    <Box sx={positionSX}>{children}</Box>\r\n                </Grow>\r\n            )}\r\n            {type === 'collapse' && (\r\n                <Collapse {...others} sx={positionSX}>\r\n                    {children}\r\n                </Collapse>\r\n            )}\r\n            {type === 'fade' && (\r\n                <Fade\r\n                    {...others}\r\n                    timeout={{\r\n                        appear: 500,\r\n                        enter: 600,\r\n                        exit: 400\r\n                    }}\r\n                >\r\n                    <Box sx={positionSX}>{children}</Box>\r\n                </Fade>\r\n            )}\r\n            {type === 'slide' && (\r\n                <Slide\r\n                    {...others}\r\n                    timeout={{\r\n                        appear: 0,\r\n                        enter: 400,\r\n                        exit: 200\r\n                    }}\r\n                    direction={direction}\r\n                >\r\n                    <Box sx={positionSX}>{children}</Box>\r\n                </Slide>\r\n            )}\r\n            {type === 'zoom' && (\r\n                <Zoom {...others}>\r\n                    <Box sx={positionSX}>{children}</Box>\r\n                </Zoom>\r\n            )}\r\n        </Box>\r\n    );\r\n});\r\n\r\nTransitions.propTypes = {\r\n    children: PropTypes.node,\r\n    type: PropTypes.oneOf(['grow', 'fade', 'collapse', 'slide', 'zoom']),\r\n    position: PropTypes.oneOf(['top-left', 'top-right', 'top', 'bottom-left', 'bottom-right', 'bottom']),\r\n    direction: PropTypes.oneOf(['up', 'down', 'left', 'right'])\r\n};\r\n\r\nTransitions.defaultProps = {\r\n    type: 'grow',\r\n    position: 'top-left',\r\n    direction: 'up'\r\n};\r\n\r\nexport default Transitions;\r\n","import { createPortal } from 'react-dom';\r\nimport { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { \r\n    Dialog, \r\n    DialogContent, \r\n    DialogTitle,\r\n    Tabs,\r\n    Tab,\r\n    Box,\r\n    Typography\r\n} from '@mui/material';\r\n\r\n\r\nfunction TabPanel(props) {\r\n    const { children, value, index, ...other } = props;\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`attachment-tabpanel-${index}`}\r\n            aria-labelledby={`attachment-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && (\r\n                <Box sx={{ p: 1 }}>\r\n                    {children}\r\n                </Box>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n  \r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.number.isRequired,\r\n    value: PropTypes.number.isRequired,\r\n};\r\n  \r\nfunction a11yProps(index) {\r\n    return {\r\n        id: `attachment-tab-${index}`,\r\n        'aria-controls': `attachment-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nconst AttachmentDialog = ({\r\n    show,\r\n    dialogProps,\r\n    onCancel,\r\n}) => {\r\n\r\n    const portalElement = document.getElementById('portal');\r\n\r\n    const [value, setValue] = useState(0);\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setValue(newValue);\r\n    };\r\n\r\n    const formatBytes = (bytes, decimals = 2) => {\r\n        if (bytes === 0) return '0 Bytes';\r\n    \r\n        const k = 1024;\r\n        const dm = decimals < 0 ? 0 : decimals;\r\n        const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n    \r\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    \r\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n    }\r\n\r\n    const component = show ? (\r\n        <Dialog\r\n            open={show}\r\n            onClose={onCancel}\r\n            fullWidth\r\n            maxWidth=\"lg\"\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle sx={{ fontSize: '1rem' }} id=\"alert-dialog-title\">\r\n                {dialogProps.title}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <Tabs value={value} onChange={handleChange} aria-label=\"attachment tabs\">\r\n                    {dialogProps.executionData.map((execObj, execObjIndex) =>\r\n                        <Tab key={execObjIndex} label={`Item ${execObjIndex}`} {...a11yProps(execObjIndex)} />\r\n                    )}\r\n                </Tabs>\r\n                {dialogProps.executionData.map((execObj, execObjIndex) =>\r\n                    <TabPanel key={execObjIndex} value={value} index={execObjIndex}>\r\n                        {execObj.attachments && execObj.attachments.map((attachment, attchIndex) =>\r\n                            <div key={attchIndex} style={{ marginBottom: 10 }}>\r\n                                <div style={{display: 'flex', flexDirection: 'row', justifyContent: 'space-between'}}>\r\n                                    <Typography sx={{p: 1}} variant=\"h5\">\r\n                                        {attachment.filename ? attachment.filename : `Attachment ${attchIndex}`} | {attachment.contentType} {attachment.size ? ` | ${formatBytes(attachment.size)}` : '' }\r\n                                    </Typography>\r\n                                    <a href={attachment.content} download rel=\"noopener noreferrer\" target=\"_blank\">\r\n                                        Download File\r\n                                    </a>\r\n                                </div>\r\n                                <embed\r\n                                    src={attachment.content}\r\n                                    width=\"100%\"\r\n                                    height=\"100%\"\r\n                                    type={attachment.contentType}\r\n                                    style={{ borderStyle: \"solid\", minHeight: '100vh', minWidth: '100vh' }}\r\n                                />\r\n                            </div>\r\n                        )}\r\n                        {!execObj.attachments && <div>No Attachment</div>}\r\n                    </TabPanel>\r\n                )}\r\n            </DialogContent>\r\n        </Dialog>\r\n    ) : null;\r\n\r\n    return createPortal(component, portalElement);\r\n}\r\n\r\nAttachmentDialog.propTypes = {\r\n    show: PropTypes.bool, \r\n    dialogProps: PropTypes.object,\r\n    onCancel: PropTypes.func,\r\n};\r\n\r\nexport default AttachmentDialog;\r\n","import { createPortal } from 'react-dom';\r\nimport { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { \r\n    Dialog, \r\n    DialogContent, \r\n    DialogTitle,\r\n    Tabs,\r\n    Tab,\r\n    Box,\r\n} from '@mui/material';\r\n\r\n\r\nfunction TabPanel(props) {\r\n    const { children, value, index, ...other } = props;\r\n    return (\r\n        <div\r\n            role=\"tabpanel\"\r\n            hidden={value !== index}\r\n            id={`attachment-tabpanel-${index}`}\r\n            aria-labelledby={`attachment-tab-${index}`}\r\n            {...other}\r\n        >\r\n            {value === index && (\r\n                <Box sx={{ p: 1 }}>\r\n                    {children}\r\n                </Box>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n  \r\nTabPanel.propTypes = {\r\n    children: PropTypes.node,\r\n    index: PropTypes.number.isRequired,\r\n    value: PropTypes.number.isRequired,\r\n};\r\n  \r\nfunction a11yProps(index) {\r\n    return {\r\n        id: `attachment-tab-${index}`,\r\n        'aria-controls': `attachment-tabpanel-${index}`,\r\n    };\r\n}\r\n\r\nconst HTMLDialog = ({\r\n    show,\r\n    dialogProps,\r\n    onCancel,\r\n}) => {\r\n\r\n    const portalElement = document.getElementById('portal');\r\n\r\n    const [value, setValue] = useState(0);\r\n\r\n    const handleChange = (event, newValue) => {\r\n        setValue(newValue);\r\n    };\r\n\r\n    const component = show ? (\r\n        <Dialog\r\n            open={show}\r\n            onClose={onCancel}\r\n            fullWidth\r\n            maxWidth=\"lg\"\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle sx={{ fontSize: '1rem' }} id=\"alert-dialog-title\">\r\n                {dialogProps.title}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <Tabs value={value} onChange={handleChange} aria-label=\"attachment tabs\">\r\n                    {dialogProps.executionData.map((execObj, execObjIndex) =>\r\n                        <Tab key={execObjIndex} label={`Item ${execObjIndex}`} {...a11yProps(execObjIndex)} />\r\n                    )}\r\n                </Tabs>\r\n                {dialogProps.executionData.map((execObj, execObjIndex) =>\r\n                    <TabPanel key={execObjIndex} value={value} index={execObjIndex}>\r\n                        {execObj.html && <div style={{ width: '100%', height: '100%', overflow: 'auto' }} dangerouslySetInnerHTML={{ __html: execObj.html }} />}\r\n                        {!execObj.html && <div>No HTML</div>}\r\n                    </TabPanel>\r\n                )}\r\n            </DialogContent>\r\n        </Dialog>\r\n    ) : null;\r\n\r\n    return createPortal(component, portalElement);\r\n}\r\n\r\nHTMLDialog.propTypes = {\r\n    show: PropTypes.bool, \r\n    dialogProps: PropTypes.object,\r\n    onCancel: PropTypes.func,\r\n};\r\n\r\nexport default HTMLDialog;\r\n","import { useContext } from 'react';\r\nimport ConfirmContext from 'store/context/ConfirmContext';\r\nimport { HIDE_CONFIRM, SHOW_CONFIRM } from \"store/actions\";\r\n\r\nlet resolveCallback;\r\nconst useConfirm = () => {\r\n    const [confirmState, dispatch] = useContext(ConfirmContext);\r\n\r\n    const closeConfirm = () => {\r\n        dispatch({\r\n            type: HIDE_CONFIRM\r\n        });\r\n    };\r\n\r\n    const onConfirm = () => {\r\n        closeConfirm();\r\n        resolveCallback(true);\r\n    };\r\n\r\n    const onCancel = () => {\r\n        closeConfirm();\r\n        resolveCallback(false);\r\n    };\r\n    const confirm = (confirmPayload) => {\r\n        dispatch({\r\n            type: SHOW_CONFIRM,\r\n            payload: confirmPayload\r\n        });\r\n        return new Promise((res) => {\r\n            resolveCallback = res;\r\n        });\r\n    };\r\n    \r\n    return { confirm, onConfirm, onCancel, confirmState };\r\n}\r\n\r\nexport default useConfirm;","import client from \"./client\";\r\n\r\nconst getAllExecutions = () => client.get(\"/executions\");\r\n\r\nconst getSpecificExecution = (shortId) => client.get(`/executions/${shortId}`);\r\n\r\nconst createNewExecution = (body) => client.post(`/executions`, body); //body: IExecution\r\n\r\nconst updateExecution = (shortId, body) => client.put(`/executions/${shortId}`, body); //body: IExecution\r\n\r\nconst deleteExecution = (shortId) => client.delete(`/executions/${shortId}`);\r\n\r\nexport default {\r\n    getAllExecutions,\r\n    getSpecificExecution,\r\n    createNewExecution,\r\n    updateExecution,\r\n    deleteExecution,\r\n};\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { \r\n    SET_WORKFLOW,\r\n    enqueueSnackbar as enqueueSnackbarAction,\r\n    closeSnackbar as closeSnackbarAction,\r\n} from 'store/actions';\r\nimport { useDispatch } from 'react-redux';\r\n\r\n// material-ui\r\nimport { useTheme } from '@mui/material/styles';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\nimport {\r\n    Box,\r\n    List,\r\n    Accordion,\r\n    AccordionSummary,\r\n    AccordionDetails,\r\n    Paper,\r\n    Popper,\r\n    Chip,\r\n    Stack,\r\n    Typography,\r\n    Button,\r\n    IconButton\r\n} from '@mui/material';\r\n\r\n// third-party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport moment from 'moment';\r\nimport ReactJson from 'react-json-view'\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport Transitions from 'ui-component/extended/Transitions';\r\nimport AttachmentDialog from 'ui-component/dialog/AttachmentDialog';\r\nimport HTMLDialog from 'ui-component/dialog/HTMLDialog';\r\nimport ExpandDataDialog from 'ui-component/dialog/ExpandDataDialog';\r\n\r\n// hooks\r\nimport useConfirm from \"hooks/useConfirm\";\r\nimport useNotifier from 'utils/useNotifier';\r\n\r\n// icon\r\nimport { IconTrash, IconX, IconArrowsMaximize } from '@tabler/icons';\r\n\r\n// API\r\nimport executionsApi from \"api/executions\";\r\nimport workflowsApi from \"api/workflows\";\r\n\r\n// utils\r\nimport { copyToClipboard } from 'utils/genericHelper';\r\n\r\n\r\n// ==============================|| EXECUTIONS ||============================== //\r\n\r\nconst Executions = ({ workflowShortId, execution, executionCount, isExecutionOpen, anchorEl }) => {\r\n    const theme = useTheme();\r\n    const [expanded, setExpanded] = useState(false);\r\n    const [open, setOpen] = useState(false);\r\n    const [showHTMLDialog, setShowHTMLDialog] = useState(false);\r\n    const [HTMLDialogProps, setHTMLDialogProps] = useState({});\r\n    const [showAttachmentDialog, setShowAttachmentDialog] = useState(false);\r\n    const [attachmentDialogProps, setAttachmentDialogProps] = useState({});\r\n    const [showExpandDialog, setShowExpandDialog] = useState(false);\r\n    const [expandDialogProps, setExpandDialogProps] = useState({});\r\n\r\n    const dispatch = useDispatch();\r\n    const varPrevOpen = useRef(open);\r\n    const { confirm } = useConfirm();\r\n\r\n    useNotifier();\r\n    const enqueueSnackbar = (...args) => dispatch(enqueueSnackbarAction(...args));\r\n    const closeSnackbar = (...args) => dispatch(closeSnackbarAction(...args));\r\n\r\n    const handleAccordionChange = (executionShortId) => (event, isExpanded) => {\r\n        setExpanded(isExpanded ? executionShortId : false);\r\n    };\r\n\r\n    const setChipColor = (execState) => {\r\n        if (execState === 'INPROGRESS') return theme.palette.warning.dark;\r\n        if (execState === 'FINISHED') return theme.palette.success.dark;\r\n        if (execState === 'ERROR') return theme.palette.error.dark;\r\n        if (execState === 'TERMINATED' || execState === 'TIMEOUT') return theme.palette.grey['700'];\r\n        return theme.palette.primary.dark;\r\n    }\r\n\r\n    const setChipBgColor = (execState) => {\r\n        if (execState === 'INPROGRESS') return theme.palette.warning.light;\r\n        if (execState === 'FINISHED') return theme.palette.success.light;\r\n        if (execState === 'ERROR') return theme.palette.error.light;\r\n        if (execState === 'TERMINATED' || execState === 'TIMEOUT') return theme.palette.grey['300'];\r\n        return theme.palette.primary.light;\r\n    }\r\n\r\n    const openAttachmentDialog = (executionData) => {\r\n        const dialogProp = {\r\n            title: 'Attachments',\r\n            executionData\r\n        };\r\n        setAttachmentDialogProps(dialogProp);\r\n        setShowAttachmentDialog(true);\r\n    };\r\n\r\n    const openHTMLDialog = (executionData) => {\r\n        const dialogProp = {\r\n            title: 'HTML',\r\n            executionData\r\n        };\r\n        setHTMLDialogProps(dialogProp);\r\n        setShowHTMLDialog(true);\r\n    };\r\n\r\n    const onExpandDialogClicked = (executionData, nodeLabel) => {\r\n        const dialogProp = {\r\n            title: `Execution Data: ${nodeLabel}`,\r\n            data: executionData\r\n        };\r\n        setExpandDialogProps(dialogProp);\r\n        setShowExpandDialog(true);\r\n    };\r\n\r\n    const deleteExecution = async(e, executionShortId) => {\r\n        e.stopPropagation();\r\n        const confirmPayload = {\r\n            title: `Delete`,\r\n            description: `Delete execution ${executionShortId}?`,\r\n            confirmButtonName: 'Delete',\r\n            cancelButtonName: 'Cancel'\r\n        }\r\n        const isConfirmed = await confirm(confirmPayload);\r\n\r\n        if (isConfirmed) {\r\n            try {\r\n                const executionResp = await executionsApi.deleteExecution(executionShortId);\r\n                if (executionResp.data) {\r\n                    const workflowResponse = await workflowsApi.getSpecificWorkflow(workflowShortId);\r\n                    if (workflowResponse.data) dispatch({ type: SET_WORKFLOW, workflow: workflowResponse.data });\r\n                }\r\n                enqueueSnackbar({\r\n                    message: 'Execution deleted!',\r\n                    options: {\r\n                        key: new Date().getTime() + Math.random(),\r\n                        variant: 'success',\r\n                        action: key => (\r\n                            <Button style={{color: 'white'}} onClick={() => closeSnackbar(key)}>\r\n                                <IconX />\r\n                            </Button>\r\n                        ),\r\n                    },\r\n                });\r\n    \r\n            } catch (error) {\r\n                const errorData =  error.response.data || `${error.response.status}: ${error.response.statusText}`;\r\n                enqueueSnackbar({\r\n                    message: errorData,\r\n                    options: {\r\n                        key: new Date().getTime() + Math.random(),\r\n                        variant: 'error',\r\n                        persist: true,\r\n                        action: key => (\r\n                            <Button style={{color: 'white'}} onClick={() => closeSnackbar(key)}>\r\n                                <IconX />\r\n                            </Button>\r\n                        ),\r\n                    },\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    // Handle Accordian\r\n    useEffect(() => {\r\n        varPrevOpen.current = open;\r\n\r\n    }, [open]);\r\n\r\n    useEffect(() => {\r\n        setOpen(isExecutionOpen);\r\n    }, [isExecutionOpen]);\r\n\r\n    return (\r\n        <>\r\n           <Popper\r\n                placement=\"bottom-end\"\r\n                open={open}\r\n                anchorEl={anchorEl}\r\n                role={undefined}\r\n                transition\r\n                disablePortal\r\n                popperOptions={{\r\n                    modifiers: [\r\n                        {\r\n                            name: 'offset',\r\n                            options: {\r\n                                offset: [170, 20]\r\n                            }\r\n                        }\r\n                    ]\r\n                }}\r\n                sx={{zIndex: 1000}}\r\n            >\r\n                {({ TransitionProps }) => (\r\n                    <Transitions in={open} {...TransitionProps}>\r\n                        <Paper>\r\n                            <MainCard border={false} elevation={16} content={false} boxShadow shadow={theme.shadows[16]}>\r\n                                <Box sx={{ p: 2 }}>\r\n                                    <Stack>\r\n                                        <Typography variant=\"h4\">{executionCount} Executions</Typography>\r\n                                    </Stack>\r\n                                </Box>\r\n                                <PerfectScrollbar style={{ height: '100%', maxHeight: 'calc(100vh - 250px)', overflowX: 'hidden' }}>\r\n                                     \r\n                                    {executionCount === 0 && execution.length === 0 && <Box sx={{ p: 2 }}>No executions yet</Box>}\r\n\r\n                                    {executionCount > 0 && execution.length > 0 && (\r\n                                    <Box sx={{ p: 2 }}>\r\n                                        <List\r\n                                            sx={{\r\n                                                width: '100%',\r\n                                                maxWidth: 330,\r\n                                                py: 0,\r\n                                                borderRadius: '10px',\r\n                                                [theme.breakpoints.down('md')]: {\r\n                                                    maxWidth: 300\r\n                                                },\r\n                                                '& .MuiListItemSecondaryAction-root': {\r\n                                                    top: 22\r\n                                                },\r\n                                                '& .MuiDivider-root': {\r\n                                                    my: 0\r\n                                                },\r\n                                                '& .list-container': {\r\n                                                    pl: 7\r\n                                                }\r\n                                            }}\r\n                                        >\r\n                                            {execution && execution.map((exec, index) => (\r\n                                                <Box key={index}>\r\n                                                    <Accordion expanded={expanded === exec.shortId} onChange={handleAccordionChange(exec.shortId)}>\r\n                                                        <AccordionSummary\r\n                                                            expandIcon={<ExpandMoreIcon />}\r\n                                                            aria-controls={`${exec.shortId}-content`}\r\n                                                            id={`${exec.shortId}-header`}\r\n                                                        >\r\n                                                            <Stack sx={{ p: 1, mr: 1 }} direction=\"column\">\r\n                                                                <Stack sx={{ mb: 1, alignItems: 'center' }} direction=\"row\">\r\n                                                                    <Typography variant=\"h5\">\r\n                                                                        {exec.shortId}\r\n                                                                    </Typography>\r\n                                                                    {exec.state && (\r\n                                                                        <Chip \r\n                                                                            sx={{\r\n                                                                                color: setChipColor(exec.state), \r\n                                                                                backgroundColor: setChipBgColor(exec.state),\r\n                                                                                ml: 1 \r\n                                                                            }} \r\n                                                                            label={exec.state}\r\n                                                                        />\r\n                                                                    )}\r\n                                                                </Stack>\r\n                                                                <Stack sx={{ mb: -1, alignItems: 'center' }} direction=\"row\">\r\n                                                                    <Typography variant=\"h6\" sx={{ color: theme.palette.grey['500'] }}>\r\n                                                                        {moment(exec.createdDate).format('MMMM Do YYYY, h:mm:ss A z')}\r\n                                                                    </Typography>\r\n                                                                    <IconButton size=\"small\" sx={{ height: 25, width: 25, ml: 1 }} title=\"Delete Execution\" color=\"error\" onClick={(e) => deleteExecution(e, exec.shortId)}>\r\n                                                                        <IconTrash />\r\n                                                                    </IconButton>\r\n                                                                </Stack>\r\n                                                            </Stack>\r\n                                                        </AccordionSummary>\r\n                                                        {JSON.parse(exec.executionData).map((execData, execDataIndex) => (\r\n                                                        <AccordionDetails key={execDataIndex}>\r\n                                                            <Box \r\n                                                                sx={{\r\n                                                                    p: 2,\r\n                                                                    backgroundColor: theme.palette.secondary.light, \r\n                                                                    borderRadius: `15px`,\r\n                                                                    position: 'relative'\r\n                                                                }}\r\n                                                                key={execDataIndex}\r\n                                                            >\r\n                                                                <Typography sx={{p: 1}} variant=\"h5\">\r\n                                                                    {execData.nodeLabel} \r\n                                                                </Typography>\r\n                                                                <ReactJson \r\n                                                                    collapsed \r\n                                                                    src={execData.data}\r\n                                                                    enableClipboard={e => copyToClipboard(e)}\r\n                                                                />\r\n                                                                <IconButton \r\n                                                                    size=\"small\" \r\n                                                                    sx={{ \r\n                                                                        height: 25, \r\n                                                                        width: 25, \r\n                                                                        position: 'absolute', \r\n                                                                        top: 5, \r\n                                                                        right: 5 \r\n                                                                    }}\r\n                                                                    title=\"Expand Data\"\r\n                                                                    color=\"primary\"\r\n                                                                    onClick={() => onExpandDialogClicked(execData.data, execData.nodeLabel)}\r\n                                                                >\r\n                                                                    <IconArrowsMaximize />\r\n                                                                </IconButton>\r\n                                                                <div>\r\n                                                                    {execData.data.map((execObj, execObjIndex) =>\r\n                                                                        <div key={execObjIndex}>\r\n\r\n                                                                            {execObj.html && (\r\n                                                                            <Typography sx={{p: 1, mt: 2}} variant=\"h5\">\r\n                                                                                HTML\r\n                                                                            </Typography>)}\r\n                                                                            {execObj.html && <div style={{ width: '100%', height: '100%', maxHeight: 400, overflow: 'auto', backgroundColor: 'white', borderRadius: 5 }} dangerouslySetInnerHTML={{ __html: execObj.html }} />}\r\n                                                                            {execObj.html && <Button sx={{ mt: 1}} size=\"small\" variant=\"contained\" onClick={() => openHTMLDialog(execData.data)}>View HTML</Button>}\r\n\r\n                                                                            {execObj.attachments && (\r\n                                                                            <Typography sx={{p: 1, pb: 0, mt: 2}} variant=\"h5\">\r\n                                                                                Attachments\r\n                                                                            </Typography>)}\r\n                                                                            {execObj.attachments && execObj.attachments.map((attachment, attchIndex) =>\r\n                                                                                <div key={attchIndex}>\r\n                                                                                    <Typography sx={{p: 1}} variant=\"h6\">\r\n                                                                                        Item {execObjIndex} | {attachment.filename ? attachment.filename : `Attachment ${attchIndex}`}\r\n                                                                                    </Typography>\r\n                                                                                    <embed\r\n                                                                                        src={attachment.content}\r\n                                                                                        width=\"100%\"\r\n                                                                                        height=\"100%\"\r\n                                                                                        style={{ borderStyle: \"solid\" }}\r\n                                                                                        type={attachment.contentType}\r\n                                                                                    />\r\n                                                                                    <Button size=\"small\" variant=\"contained\" onClick={() => openAttachmentDialog(execData.data)}>View Attachment</Button>\r\n                                                                                </div>\r\n                                                                            )}\r\n                                                                        </div>\r\n                                                                    )}\r\n                                                                </div>\r\n                                                            </Box>\r\n                                                        </AccordionDetails>\r\n                                                        ))}\r\n                                                    </Accordion>\r\n                                                </Box>\r\n                                            ))}\r\n                                        </List>\r\n                                    </Box>\r\n                                    )}\r\n                                </PerfectScrollbar>\r\n                            </MainCard>\r\n                        </Paper>\r\n                    </Transitions>\r\n                )}\r\n            </Popper>\r\n            <AttachmentDialog\r\n                show={showAttachmentDialog}\r\n                dialogProps={attachmentDialogProps}\r\n                onCancel={() => setShowAttachmentDialog(false)}\r\n            ></AttachmentDialog>\r\n            <HTMLDialog\r\n                show={showHTMLDialog}\r\n                dialogProps={HTMLDialogProps}\r\n                onCancel={() => setShowHTMLDialog(false)}\r\n            ></HTMLDialog>\r\n            <ExpandDataDialog\r\n                show={showExpandDialog}\r\n                dialogProps={expandDialogProps}\r\n                onCancel={() => setShowExpandDialog(false)}\r\n            ></ExpandDataDialog>\r\n        </>\r\n    );\r\n};\r\n\r\nExecutions.propTypes = {\r\n    workflowShortId: PropTypes.string,\r\n    execution: PropTypes.array,\r\n    executionCount: PropTypes.number,\r\n    isExecutionOpen: PropTypes.bool,\r\n    anchorEl: PropTypes.any,\r\n};\r\n\r\nexport default Executions;\r\n","// assets\r\nimport { IconTrash, IconFileUpload, IconFileExport } from '@tabler/icons';\r\n\r\n// constant\r\nconst icons = { IconTrash, IconFileUpload, IconFileExport };\r\n\r\n// ==============================|| SETTINGS MENU ITEMS ||============================== //\r\n\r\nconst settings = {\r\n    id: 'settings',\r\n    title: '',\r\n    type: 'group',\r\n    children: [\r\n        {\r\n            id: 'loadWorkflow',\r\n            title: 'Load Workflow',\r\n            type: 'item',\r\n            url: '',\r\n            icon: icons.IconFileUpload,\r\n        },\r\n        {\r\n            id: 'exportWorkflow',\r\n            title: 'Export Workflow',\r\n            type: 'item',\r\n            url: '',\r\n            icon: icons.IconFileExport,\r\n        },\r\n        {\r\n            id: 'deleteWorkflow',\r\n            title: 'Delete Workflow',\r\n            type: 'item',\r\n            url: '',\r\n            icon: icons.IconTrash,\r\n        }\r\n    ],\r\n};\r\n\r\nexport default settings;\r\n","import { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { useTheme } from '@mui/material/styles';\r\nimport {\r\n    Box,\r\n    List,\r\n    Paper,\r\n    Popper,\r\n} from '@mui/material';\r\n\r\n// third-party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport Transitions from 'ui-component/extended/Transitions';\r\nimport NavItem from 'layout/MainLayout/Sidebar/MenuList/NavItem';\r\n\r\nimport settings from 'menu-items/settings';\r\n\r\n// ==============================|| SETTINGS ||============================== //\r\n\r\nconst Settings = ({ workflow, isSettingsOpen, anchorEl, onSettingsItemClick, onUploadFile }) => {\r\n    const theme = useTheme();\r\n    const [settingsMenu, setSettingsMenu] = useState([]);\r\n\r\n    const [open, setOpen] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (workflow && !workflow.shortId) {\r\n            const settingsMenu = settings.children.filter((menu) => menu.id === 'loadWorkflow');\r\n            setSettingsMenu(settingsMenu);\r\n\r\n        } else if (workflow && workflow.shortId) {\r\n            const settingsMenu = settings.children;\r\n            setSettingsMenu(settingsMenu);\r\n        }\r\n    }, [workflow]);\r\n\r\n\r\n    useEffect(() => {\r\n        setOpen(isSettingsOpen);\r\n    }, [isSettingsOpen]);\r\n\r\n    // settings list items\r\n    const items = settingsMenu.map((menu) => {\r\n        return <NavItem key={menu.id} item={menu} level={1} navType=\"SETTINGS\" onClick={(id) => onSettingsItemClick(id)} onUploadFile={onUploadFile} />;\r\n    });\r\n\r\n    return (\r\n        <>\r\n           <Popper\r\n                placement=\"bottom-end\"\r\n                open={open}\r\n                anchorEl={anchorEl}\r\n                role={undefined}\r\n                transition\r\n                disablePortal\r\n                popperOptions={{\r\n                    modifiers: [\r\n                        {\r\n                            name: 'offset',\r\n                            options: {\r\n                                offset: [170, 20]\r\n                            }\r\n                        }\r\n                    ]\r\n                }}\r\n                sx={{zIndex: 1000}}\r\n            >\r\n                {({ TransitionProps }) => (\r\n                    <Transitions in={open} {...TransitionProps}>\r\n                        <Paper>\r\n                            <MainCard border={false} elevation={16} content={false} boxShadow shadow={theme.shadows[16]}>\r\n                                <PerfectScrollbar style={{ height: '100%', maxHeight: 'calc(100vh - 250px)', overflowX: 'hidden' }}>\r\n                                    <Box sx={{ p: 2 }}>\r\n                                        <List>\r\n                                           {items}\r\n                                        </List>\r\n                                    </Box>\r\n                                </PerfectScrollbar>\r\n                            </MainCard>\r\n                        </Paper>\r\n                    </Transitions>\r\n                )}\r\n            </Popper>\r\n        </>\r\n    );\r\n};\r\n\r\nSettings.propTypes = {\r\n    workflow: PropTypes.object,\r\n    isSettingsOpen: PropTypes.bool,\r\n    anchorEl: PropTypes.any,\r\n    onSettingsItemClick: PropTypes.func,\r\n    onUploadFile: PropTypes.func\r\n};\r\n\r\nexport default Settings;\r\n","import { createPortal } from 'react-dom';\r\nimport { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { \r\n    Button, \r\n    Dialog, \r\n    DialogActions,\r\n    DialogContent, \r\n    OutlinedInput,\r\n    DialogTitle \r\n} from '@mui/material';\r\n\r\nconst SaveWorkflowDialog = ({\r\n    show,\r\n    dialogProps,\r\n    onCancel,\r\n    onConfirm,\r\n}) => {\r\n\r\n    const portalElement = document.getElementById('portal');\r\n\r\n    const [workflowName, setWorkflowName] = useState('');\r\n    const [isReadyToSave, setIsReadyToSave] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (workflowName) setIsReadyToSave(true);\r\n        else setIsReadyToSave(false);\r\n\r\n    }, [workflowName]);\r\n\r\n    const component = show ? (\r\n        <Dialog\r\n            open={show}\r\n            fullWidth\r\n            maxWidth=\"xs\"\r\n            onClose={onCancel}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle sx={{ fontSize: '1rem' }} id=\"alert-dialog-title\">\r\n                {dialogProps.title}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <OutlinedInput\r\n                    sx={{ mt: 1 }}\r\n                    id=\"workflow-name\"\r\n                    type='text'\r\n                    fullWidth\r\n                    placeholder=\"My New Workflow\"\r\n                    value={workflowName}\r\n                    onChange={(e) => setWorkflowName(e.target.value)}\r\n                />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={onCancel}>\r\n                    {dialogProps.cancelButtonName}\r\n                </Button>\r\n                <Button disabled={!isReadyToSave} variant=\"contained\" onClick={() => onConfirm(workflowName)}>\r\n                    {dialogProps.confirmButtonName}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    ) : null;\r\n\r\n    return createPortal(component, portalElement);\r\n}\r\n\r\nSaveWorkflowDialog.propTypes = {\r\n    show: PropTypes.bool, \r\n    dialogProps: PropTypes.object,\r\n    onCancel: PropTypes.func,\r\n    onConfirm: PropTypes.func,\r\n};\r\n\r\nexport default SaveWorkflowDialog;\r\n\r\n","import PropTypes from 'prop-types';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { useEffect, useRef, useState } from 'react';\r\n\r\n// material-ui\r\nimport { useTheme } from '@mui/material/styles';\r\nimport { Avatar, Box, ButtonBase, Typography, Stack, TextField, Chip } from '@mui/material';\r\n\r\n// icons\r\nimport { IconSettings, IconChevronLeft, IconDeviceFloppy, IconRocket, IconPencil, IconCheck, IconX, IconPlayerPause, IconListCheck } from '@tabler/icons';\r\n\r\n// project imports\r\nimport Executions from 'views/executions';\r\nimport Settings from 'views/settings';\r\nimport SaveWorkflowDialog from 'ui-component/dialog/SaveWorkflowDialog';\r\n\r\n// API\r\nimport workflowsApi from \"api/workflows\";\r\n\r\n// Hooks\r\nimport useApi from \"hooks/useApi\";\r\n\r\n// utils\r\nimport { \r\n    generateExportFlowData\r\n} from  'utils/genericHelper';\r\n\r\n// ==============================|| CANVAS HEADER ||============================== //\r\n\r\nconst CanvasHeader = ({ \r\n    workflow, \r\n    handleSaveFlow,\r\n    handleDeployWorkflow, \r\n    handleStopWorkflow, \r\n    handleDeleteWorkflow,\r\n    handleLoadWorkflow\r\n}) => {\r\n\r\n    const theme = useTheme();\r\n    const navigate = useNavigate();\r\n    const workflowNameRef = useRef();\r\n    const viewExecutionRef = useRef();\r\n    const settingsRef = useRef();\r\n\r\n    const [isEditingWorkflowName, setEditingWorkflowName] = useState(null);\r\n    const [workflowName, setWorkflowName] = useState('');\r\n    const [isExecutionOpen, setExecutionOpen] = useState(false);\r\n    const [isSettingsOpen, setSettingsOpen] = useState(false);\r\n    const [workfowDialogOpen, setWorkfowDialogOpen] = useState(false);\r\n\r\n    const updateWorkflowApi = useApi(workflowsApi.updateWorkflow);\r\n    const canvas = useSelector((state) => state.canvas);\r\n\r\n    const onSettingsItemClick = (setting) => {\r\n\r\n        setSettingsOpen(false);\r\n        \r\n        if (setting === 'deleteWorkflow') {\r\n            handleDeleteWorkflow();\r\n\r\n        } else if (setting === 'exportWorkflow') {\r\n            try {\r\n                const flowData = JSON.parse(workflow.flowData);\r\n                let dataStr = JSON.stringify(generateExportFlowData(flowData));\r\n                let dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);\r\n\r\n                let exportFileDefaultName = `${workflow.name} Workflow.json`;\r\n\r\n                let linkElement = document.createElement('a');\r\n                linkElement.setAttribute('href', dataUri);\r\n                linkElement.setAttribute('download', exportFileDefaultName);\r\n                linkElement.click();\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    const onUploadFile = (file) => {\r\n        setSettingsOpen(false);\r\n        handleLoadWorkflow(file);\r\n    }\r\n\r\n    const submitWorkflowName = () => {\r\n        if (workflow.shortId) {\r\n            const updateBody = {\r\n                name: workflowNameRef.current.value\r\n            };\r\n            updateWorkflowApi.request(workflow.shortId, updateBody);\r\n        }\r\n    };\r\n\r\n    const onSaveWorkflowClick = () => {\r\n        if (workflow.shortId) handleSaveFlow(workflow.name);\r\n        else setWorkfowDialogOpen(true);\r\n    }\r\n\r\n    const onConfirmSaveName = (workflowName) => {\r\n        setWorkfowDialogOpen(false);\r\n        handleSaveFlow(workflowName);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (updateWorkflowApi.data) {\r\n            setWorkflowName(updateWorkflowApi.data.name);\r\n        }\r\n        setEditingWorkflowName(false);\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [updateWorkflowApi.data]);\r\n\r\n    useEffect(() => {\r\n        if (workflow) {\r\n            setWorkflowName(workflow.name);\r\n        }\r\n    }, [workflow]);\r\n\r\n    return (\r\n        <>\r\n            <Box >\r\n                <ButtonBase title=\"Back\" sx={{ borderRadius: '50%' }}>\r\n                    <Avatar\r\n                        variant=\"rounded\"\r\n                        sx={{\r\n                            ...theme.typography.commonAvatar,\r\n                            ...theme.typography.mediumAvatar,\r\n                            transition: 'all .2s ease-in-out',\r\n                            background: theme.palette.secondary.light,\r\n                            color: theme.palette.secondary.dark,\r\n                            '&:hover': {\r\n                                background: theme.palette.secondary.dark,\r\n                                color: theme.palette.secondary.light\r\n                            }\r\n                        }}\r\n                        color=\"inherit\"\r\n                        onClick={() => navigate(-1)}\r\n                    >\r\n                        <IconChevronLeft stroke={1.5} size=\"1.3rem\" />\r\n                    </Avatar>\r\n                </ButtonBase>\r\n            </Box>\r\n            <Box sx={{ flexGrow: 1 }}>\r\n                {!isEditingWorkflowName && (\r\n                <Stack flexDirection=\"row\">\r\n                    <Typography\r\n                        sx={{\r\n                            fontSize: '1.5rem',\r\n                            fontWeight: 600,\r\n                            ml: 2\r\n                        }}\r\n                    >\r\n                        {canvas.isDirty && <strong style={{color: theme.palette.orange.main}}>*</strong> } {workflowName}\r\n                    </Typography>\r\n                    {workflow?.shortId && (\r\n                    <ButtonBase title=\"Edit Name\" sx={{ borderRadius: '50%' }}>\r\n                        <Avatar\r\n                            variant=\"rounded\"\r\n                            sx={{\r\n                                ...theme.typography.commonAvatar,\r\n                                ...theme.typography.mediumAvatar,\r\n                                transition: 'all .2s ease-in-out',\r\n                                background: 'white',\r\n                                color: theme.palette.text.dark,\r\n                                ml: 1,\r\n                                '&:hover': {\r\n                                    background: theme.palette.secondary.light,\r\n                                    color: theme.palette.secondary.dark,\r\n                                }\r\n                            }}\r\n                            color=\"inherit\"\r\n                            onClick={() => setEditingWorkflowName(true)}\r\n                        >\r\n                            <IconPencil stroke={1.5} size=\"1.3rem\" />\r\n                        </Avatar>\r\n                    </ButtonBase>)}\r\n                    {workflow?.deployed && (\r\n                        <Chip \r\n                            sx={{\r\n                                color: theme.palette.success.dark, \r\n                                backgroundColor: theme.palette.success.light, \r\n                                ml: 1\r\n                            }} \r\n                            label=\"Deployed\" \r\n                            color=\"success\" \r\n                        />\r\n                    )}\r\n                </Stack>\r\n                )}\r\n                {isEditingWorkflowName && (\r\n                <Stack flexDirection=\"row\">\r\n                    <TextField\r\n                        size=\"small\"\r\n                        inputRef={workflowNameRef}\r\n                        sx={{\r\n                            width: '50%',\r\n                            ml: 2\r\n                        }}\r\n                        defaultValue={workflowName}\r\n                    />\r\n                    <ButtonBase title=\"Save Name\" sx={{ borderRadius: '50%' }}>\r\n                        <Avatar\r\n                            variant=\"rounded\"\r\n                            sx={{\r\n                                ...theme.typography.commonAvatar,\r\n                                ...theme.typography.mediumAvatar,\r\n                                transition: 'all .2s ease-in-out',\r\n                                background: 'white',\r\n                                color: theme.palette.text.dark,\r\n                                ml: 1,\r\n                                '&:hover': {\r\n                                    background: theme.palette.secondary.light,\r\n                                    color: theme.palette.secondary.dark,\r\n                                }\r\n                            }}\r\n                            color=\"inherit\"\r\n                            onClick={submitWorkflowName}\r\n                        >\r\n                            <IconCheck stroke={1.5} size=\"1.3rem\" />\r\n                        </Avatar>\r\n                    </ButtonBase>\r\n                    <ButtonBase title=\"Cancel\" sx={{ borderRadius: '50%' }}>\r\n                        <Avatar\r\n                            variant=\"rounded\"\r\n                            sx={{\r\n                                ...theme.typography.commonAvatar,\r\n                                ...theme.typography.mediumAvatar,\r\n                                transition: 'all .2s ease-in-out',\r\n                                background: 'white',\r\n                                color: theme.palette.text.dark,\r\n                                ml: 1,\r\n                                '&:hover': {\r\n                                    background: theme.palette.error.light,\r\n                                    color: theme.palette.error.dark,\r\n                                }\r\n                            }}\r\n                            color=\"inherit\"\r\n                            onClick={() => setEditingWorkflowName(false)}\r\n                        >\r\n                            <IconX stroke={1.5} size=\"1.3rem\" />\r\n                        </Avatar>\r\n                    </ButtonBase>\r\n                </Stack>\r\n                )}\r\n            </Box>\r\n            <Box >\r\n                {workflow?.shortId && (\r\n                <ButtonBase ref={viewExecutionRef} title=\"View Executions\" sx={{ borderRadius: '50%', mr: 2 }}>\r\n                    <Avatar\r\n                        variant=\"rounded\"\r\n                        sx={{\r\n                            ...theme.typography.commonAvatar,\r\n                            ...theme.typography.mediumAvatar,\r\n                            width: '54px',\r\n                            transition: 'all .2s ease-in-out',\r\n                            background: theme.palette.success.light,\r\n                            color: theme.palette.success.dark,\r\n                            '&:hover': {\r\n                                background: theme.palette.success.dark,\r\n                                color: theme.palette.success.light\r\n                            }\r\n                        }}\r\n                        color=\"inherit\"\r\n                        onClick={() => setExecutionOpen(!isExecutionOpen)}\r\n                    >\r\n                       <h6>{workflow?.executionCount}</h6>&nbsp;<IconListCheck stroke={1.5} size=\"1.3rem\" />\r\n                    </Avatar>\r\n                </ButtonBase>\r\n                )}\r\n                {workflow?.shortId && (\r\n                <ButtonBase title={workflow?.deployed ? \"Stop Workflow\" : \"Deploy Workflow\"} sx={{ borderRadius: '50%', mr: 2 }}>\r\n                    <Avatar\r\n                        variant=\"rounded\"\r\n                        sx={{\r\n                            ...theme.typography.commonAvatar,\r\n                            ...theme.typography.mediumAvatar,\r\n                            transition: 'all .2s ease-in-out',\r\n                            background: theme.palette.primary.light,\r\n                            color: theme.palette.primary.dark,\r\n                            '&:hover': {\r\n                                background: theme.palette.primary.dark,\r\n                                color: theme.palette.primary.light\r\n                            }\r\n                        }}\r\n                        color=\"inherit\"\r\n                        onClick={workflow?.deployed ? handleStopWorkflow : handleDeployWorkflow}\r\n                    >\r\n                        {workflow?.deployed ? <IconPlayerPause stroke={1.5} size=\"1.3rem\" /> : <IconRocket stroke={1.5} size=\"1.3rem\" />}\r\n                    </Avatar>\r\n                </ButtonBase>\r\n                )}\r\n                <ButtonBase title=\"Save Workflow\" sx={{ borderRadius: '50%', mr: 2 }}>\r\n                    <Avatar\r\n                        variant=\"rounded\"\r\n                        sx={{\r\n                            ...theme.typography.commonAvatar,\r\n                            ...theme.typography.mediumAvatar,\r\n                            transition: 'all .2s ease-in-out',\r\n                            background: theme.palette.secondary.light,\r\n                            color: theme.palette.secondary.dark,\r\n                            '&:hover': {\r\n                                background: theme.palette.secondary.dark,\r\n                                color: theme.palette.secondary.light\r\n                            }\r\n                        }}\r\n                        color=\"inherit\"\r\n                        onClick={onSaveWorkflowClick}\r\n                    >\r\n                        <IconDeviceFloppy stroke={1.5} size=\"1.3rem\" />\r\n                    </Avatar>\r\n                </ButtonBase>\r\n                <ButtonBase ref={settingsRef}  title=\"Settings\" sx={{ borderRadius: '50%' }}>\r\n                    <Avatar\r\n                        variant=\"rounded\"\r\n                        sx={{\r\n                            ...theme.typography.commonAvatar,\r\n                            ...theme.typography.mediumAvatar,\r\n                            transition: 'all .2s ease-in-out',\r\n                            background: theme.palette.grey[300],\r\n                            color: theme.palette.grey[700],\r\n                            '&:hover': {\r\n                                background: theme.palette.grey[700],\r\n                                color: theme.palette.grey[300],\r\n                            }\r\n                        }}\r\n                        onClick={() => setSettingsOpen(!isSettingsOpen)}\r\n                    >\r\n                        <IconSettings stroke={1.5} size=\"1.3rem\" />\r\n                    </Avatar>\r\n                </ButtonBase>\r\n            </Box>\r\n            {workflow?.shortId && (\r\n            <Executions\r\n                workflowShortId={workflow?.shortId}\r\n                execution={workflow?.execution}\r\n                executionCount={workflow?.executionCount}\r\n                isExecutionOpen={isExecutionOpen}\r\n                anchorEl={viewExecutionRef.current}\r\n            />\r\n            )}\r\n            <Settings\r\n                workflow={workflow}\r\n                isSettingsOpen={isSettingsOpen}\r\n                anchorEl={settingsRef.current}\r\n                onSettingsItemClick={onSettingsItemClick}\r\n                onUploadFile={onUploadFile}\r\n            />\r\n            <SaveWorkflowDialog\r\n                show={workfowDialogOpen}\r\n                dialogProps={{\r\n                    title: `Save New Workflow`,\r\n                    confirmButtonName: 'Save',\r\n                    cancelButtonName: 'Cancel'\r\n                }}\r\n                onCancel={() => setWorkfowDialogOpen(false)}\r\n                onConfirm={onConfirmSaveName}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nCanvasHeader.propTypes = {\r\n    workflow: PropTypes.object,\r\n    handleSaveFlow: PropTypes.func,\r\n    handleDeployWorkflow: PropTypes.func,\r\n    handleStopWorkflow: PropTypes.func,\r\n    handleDeleteWorkflow: PropTypes.func,\r\n    handleLoadWorkflow: PropTypes.func,\r\n};\r\n\r\nexport default CanvasHeader;\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { useTheme } from '@mui/material/styles';\r\nimport {\r\n    Box,\r\n    Fab,\r\n    ClickAwayListener,\r\n    Divider,\r\n    InputAdornment,\r\n    List,\r\n    ListItemButton,\r\n    ListItem,\r\n    ListItemAvatar,\r\n    ListItemText,\r\n    OutlinedInput,\r\n    Paper,\r\n    Popper,\r\n    Stack,\r\n    Typography\r\n} from '@mui/material';\r\n\r\n// third-party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport Transitions from 'ui-component/extended/Transitions';\r\n\r\n// icons\r\nimport { IconPlus, IconSearch, IconMinus } from '@tabler/icons';\r\n\r\n// const\r\nimport { baseURL } from 'store/constant';\r\n\r\n// ==============================|| ADD NODES||============================== //\r\n\r\nconst AddNodes = ({ nodesData, node }) => {\r\n    const theme = useTheme();\r\n    const customization = useSelector((state) => state.customization);\r\n\r\n    const [searchValue, setSearchValue] = useState('');\r\n    const [nodes, setNodes] = useState([]);\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const anchorRef = useRef(null);\r\n    const prevOpen = useRef(open);\r\n\r\n    const filterSearch = (value) => {\r\n        setSearchValue(value);\r\n        setTimeout(() => {\r\n            if (value) {\r\n                const returnData = nodesData.filter((nd) => nd.name.toLowerCase().includes(value.toLowerCase()));\r\n                setNodes(returnData);\r\n\r\n            } else if (value === '') {\r\n                setNodes(nodesData);\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    const handleClose = (event) => {\r\n        if (anchorRef.current && anchorRef.current.contains(event.target)) {\r\n            return;\r\n        }\r\n        setOpen(false);\r\n    };\r\n\r\n    const handleToggle = () => {\r\n        setOpen((prevOpen) => !prevOpen);\r\n    };\r\n\r\n    const onDragStart = (event, node) => {\r\n        event.dataTransfer.setData('application/reactflow', JSON.stringify(node));\r\n        event.dataTransfer.effectAllowed = 'move';\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (prevOpen.current === true && open === false) {\r\n            anchorRef.current.focus();\r\n        }\r\n\r\n        prevOpen.current = open;\r\n    }, [open]);\r\n\r\n    useEffect(() => {\r\n        if (node) setOpen(false);\r\n    }, [node]);\r\n\r\n    useEffect(() => {\r\n        if (nodesData) setNodes(nodesData);\r\n    }, [nodesData]);\r\n\r\n    return (\r\n        <>\r\n            <Fab \r\n                sx={{ left: 20, top: 20 }} \r\n                ref={anchorRef}\r\n                size=\"small\" \r\n                color=\"primary\" \r\n                aria-label=\"add\" \r\n                title=\"Add Node\"\r\n                onClick={handleToggle}\r\n            >\r\n                {open ? <IconMinus /> : <IconPlus />}\r\n            </Fab>\r\n            <Popper\r\n                placement=\"bottom-end\"\r\n                open={open}\r\n                anchorEl={anchorRef.current}\r\n                role={undefined}\r\n                transition\r\n                disablePortal\r\n                popperOptions={{\r\n                    modifiers: [\r\n                        {\r\n                            name: 'offset',\r\n                            options: {\r\n                                offset: [-40, 14]\r\n                            }\r\n                        }\r\n                    ]\r\n                }}\r\n                sx={{zIndex: 1000}}\r\n            >\r\n                {({ TransitionProps }) => (\r\n                    <Transitions in={open} {...TransitionProps}>\r\n                        <Paper>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MainCard border={false} elevation={16} content={false} boxShadow shadow={theme.shadows[16]}>\r\n                                    <Box sx={{ p: 2 }}>\r\n                                        <Stack>\r\n                                            <Typography variant=\"h4\">Add Nodes</Typography>\r\n                                        </Stack>\r\n                                        <OutlinedInput\r\n                                            sx={{ width: '100%', pr: 1, pl: 2, my: 2 }}\r\n                                            id=\"input-search-node\"\r\n                                            value={searchValue}\r\n                                            onChange={(e) => filterSearch(e.target.value)}\r\n                                            placeholder=\"Search nodes\"\r\n                                            startAdornment={\r\n                                                <InputAdornment position=\"start\">\r\n                                                    <IconSearch stroke={1.5} size=\"1rem\" color={theme.palette.grey[500]} />\r\n                                                </InputAdornment>\r\n                                            }\r\n                                            aria-describedby=\"search-helper-text\"\r\n                                            inputProps={{\r\n                                                'aria-label': 'weight'\r\n                                            }}\r\n                                        />\r\n                                        <Divider />\r\n                                    </Box>\r\n                                    <PerfectScrollbar style={{ height: '100%', maxHeight: 'calc(100vh - 250px)', overflowX: 'hidden' }}>\r\n                                        <Box sx={{ p: 2 }}>\r\n                                            <List\r\n                                                sx={{\r\n                                                    width: '100%',\r\n                                                    maxWidth: 330,\r\n                                                    py: 0,\r\n                                                    borderRadius: '10px',\r\n                                                    [theme.breakpoints.down('md')]: {\r\n                                                        maxWidth: 300\r\n                                                    },\r\n                                                    '& .MuiListItemSecondaryAction-root': {\r\n                                                        top: 22\r\n                                                    },\r\n                                                    '& .MuiDivider-root': {\r\n                                                        my: 0\r\n                                                    },\r\n                                                    '& .list-container': {\r\n                                                        pl: 7\r\n                                                    }\r\n                                                }}\r\n                                            >\r\n                                                {nodes.map((node) => (\r\n                                                    <div key={node.name} onDragStart={(event) => onDragStart(event, node)} draggable>\r\n                                                        <ListItemButton\r\n                                                            sx={{ p: 0, borderRadius: `${customization.borderRadius}px`, cursor: 'move' }}\r\n                                                        >\r\n                                                            <ListItem alignItems=\"center\">\r\n                                                                <ListItemAvatar>\r\n                                                                    <div style={{ width: 50, height: 50, borderRadius: '50%', backgroundColor: 'white' }}>\r\n                                                                        <img style={{ width: '100%', height: '100%', padding: 10, objectFit: 'contain' }} alt={node.name} src={`${baseURL}/api/v1/node-icon/${node.name}`} />\r\n                                                                    </div>\r\n                                                                </ListItemAvatar>\r\n                                                                <ListItemText sx={{ ml: 1 }} primary={node.label} secondary={node.description} />\r\n                                                            </ListItem>\r\n                                                        </ListItemButton>\r\n                                                        <Divider />\r\n                                                    </div>\r\n                                                ))}\r\n                                            </List>\r\n                                        </Box>\r\n                                    </PerfectScrollbar>\r\n                                </MainCard>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Transitions>\r\n                )}\r\n            </Popper>\r\n        </>\r\n    );\r\n};\r\n\r\nAddNodes.propTypes = {\r\n    nodesData: PropTypes.array,\r\n    node: PropTypes.object,\r\n};\r\n\r\nexport default AddNodes;\r\n","import client from \"./client\";\r\n\r\nconst getAllNodes = () => client.get(\"/nodes\");\r\n\r\nconst getSpecificNode = (name) => client.get(`/nodes/${name}`);\r\n\r\nconst testNode = (name, body) => client.post(`/node-test/${name}`, body); //body: ITestNodeBody\r\n\r\nconst loadMethodNode = (name, nodeData) => client.post(`/node-load-method/${name}`, nodeData); //nodeData: INodeData\r\n\r\nconst removeTestTriggers = () => client.post(`/remove-test-triggers`);\r\n\r\nexport default {\r\n    getAllNodes,\r\n    getSpecificNode,\r\n    testNode,\r\n    loadMethodNode,\r\n    removeTestTriggers,\r\n};\r\n","import { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport {\r\n    Box,\r\n    Button,\r\n    Chip,\r\n    CircularProgress,\r\n    Stack,\r\n    Typography,\r\n    IconButton\r\n} from '@mui/material';\r\nimport { useTheme } from '@mui/material/styles';\r\n\r\n// third party\r\nimport ReactJson from 'react-json-view'\r\nimport socketIOClient from \"socket.io-client\";\r\n\r\n// project imports\r\nimport AnimateButton from 'ui-component/extended/AnimateButton';\r\nimport AttachmentDialog from 'ui-component/dialog/AttachmentDialog';\r\nimport HTMLDialog from 'ui-component/dialog/HTMLDialog';\r\nimport ExpandDataDialog from 'ui-component/dialog/ExpandDataDialog';\r\n\r\n// API\r\nimport nodesApi from \"api/nodes\";\r\n\r\n// Hooks\r\nimport useApi from \"hooks/useApi\";\r\n\r\n// icons\r\nimport { IconExclamationMark, IconCopy, IconArrowUpRightCircle, IconX, IconArrowsMaximize } from '@tabler/icons';\r\n\r\n// const\r\nimport { baseURL } from 'store/constant';\r\n\r\n// utils\r\nimport { copyToClipboard } from 'utils/genericHelper';\r\n\r\n\r\n// ==============================|| OUTPUT RESPONSES ||============================== //\r\n\r\nconst OutputResponses = ({ nodeId, nodeParamsType, nodeFlowData, nodes, edges, workflow, onSubmit }) => {\r\n\r\n    const theme = useTheme();\r\n\r\n    const [outputResponse, setOutputResponse] = useState([]);\r\n    const [errorResponse, setErrorResponse] = useState(null);\r\n    const [nodeName, setNodeName] = useState(null);\r\n    const [nodeType, setNodeType] = useState(null);\r\n    const [nodeLabel, setNodeLabel] = useState(null);\r\n    const [isTestNodeBtnDisabled, disableTestNodeBtn] = useState(true);\r\n    const [testNodeLoading, setTestNodeLoading] = useState(null);\r\n    const [showHTMLDialog, setShowHTMLDialog] = useState(false);\r\n    const [HTMLDialogProps, setHTMLDialogProps] = useState({});\r\n    const [showAttachmentDialog, setShowAttachmentDialog] = useState(false);\r\n    const [attachmentDialogProps, setAttachmentDialogProps] = useState({});\r\n    const [showExpandDialog, setShowExpandDialog] = useState(false);\r\n    const [expandDialogProps, setExpandDialogProps] = useState({});\r\n\r\n    const testNodeApi = useApi(nodesApi.testNode);\r\n\r\n    const onTestNodeClick = (nodeType) => {\r\n \r\n        /* If workflow is already deployed, stop it first to be safe.\r\n        *  Because it could cause throttled calls\r\n        */\r\n        if (workflow.deployed) {\r\n            setTestNodeLoading(false);\r\n            alert('Testing trigger requires stopping workflow. Please stop workflow first');\r\n            return;\r\n        }\r\n  \r\n        const testNodeBody = {\r\n            nodes,\r\n            edges,\r\n            nodeId\r\n        };\r\n\r\n        try {\r\n            setTestNodeLoading(true);\r\n\r\n            if (nodeType === 'webhook') {\r\n\r\n                const socket = socketIOClient(baseURL);\r\n\r\n                socket.on('connect', async() => {\r\n                    testNodeBody.clientId = socket.id;\r\n                    testNodeApi.request(nodeFlowData.name, testNodeBody);\r\n                });\r\n                \r\n                socket.on('testWebhookNodeResponse', (data) => {\r\n                    setOutputResponse(data);\r\n                    setTestNodeLoading(false);\r\n                    const formValues = {\r\n                        submit: true,\r\n                        needRetest: null,\r\n                        output: data,\r\n                    };\r\n                    onSubmit(formValues, 'outputResponses');\r\n                    socket.disconnect();\r\n                });\r\n\r\n            } else {\r\n                testNodeApi.request(nodeFlowData.name, testNodeBody);\r\n            }\r\n\r\n        } catch(error) {\r\n            setTestNodeLoading(false);\r\n            setOutputResponse([]);\r\n            setErrorResponse(error);\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    const checkIfTestNodeValid = () => {\r\n        const paramsTypes = nodeParamsType.filter((type) => type !== 'outputResponses');\r\n        for (let i = 0; i < paramsTypes.length; i+= 1) {\r\n            const paramType = paramsTypes[i];\r\n\r\n            if (!nodeFlowData[paramType] || !nodeFlowData[paramType].submit) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    const openAttachmentDialog = (outputResponse) => {\r\n        const dialogProp = {\r\n            title: 'Attachments',\r\n            executionData: outputResponse\r\n        };\r\n        setAttachmentDialogProps(dialogProp);\r\n        setShowAttachmentDialog(true);\r\n    };\r\n\r\n    const openHTMLDialog = (executionData) => {\r\n        const dialogProp = {\r\n            title: 'HTML',\r\n            executionData\r\n        };\r\n        setHTMLDialogProps(dialogProp);\r\n        setShowHTMLDialog(true);\r\n    };\r\n\r\n    const onExpandDialogClicked = (executionData) => {\r\n        const dialogProp = {\r\n            title: `Output Responses: ${nodeLabel} `,\r\n            data: executionData\r\n        };\r\n        setExpandDialogProps(dialogProp);\r\n        setShowExpandDialog(true);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (nodeFlowData && nodeFlowData.outputResponses && nodeFlowData.outputResponses.output) {\r\n            setOutputResponse(nodeFlowData.outputResponses.output);\r\n        } else {\r\n            setOutputResponse([]);\r\n        }\r\n\r\n        disableTestNodeBtn(checkIfTestNodeValid());\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [nodeFlowData, nodeParamsType]);\r\n\r\n\r\n    useEffect(() => {\r\n        if (nodes && nodeId) {\r\n            const selectedNode = nodes.find((nd) => nd.id === nodeId);\r\n            if (selectedNode) {\r\n                setNodeName(selectedNode.data.name);\r\n                setNodeType(selectedNode.data.type);\r\n                setNodeLabel(selectedNode.data.label);\r\n            }\r\n        }\r\n\r\n    }, [nodes, nodeId]);\r\n\r\n\r\n    // Test node successful\r\n    useEffect(() => {\r\n        if (testNodeApi.data && nodeType && nodeType !== 'webhook') {\r\n            const testNodeData = testNodeApi.data;\r\n            setOutputResponse(testNodeData);\r\n            setErrorResponse(null);\r\n            const formValues = {\r\n                submit: true,\r\n                needRetest: null,\r\n                output: testNodeData,\r\n            };\r\n            onSubmit(formValues, 'outputResponses')\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [testNodeApi.data]);\r\n\r\n\r\n    // Test node error\r\n    useEffect(() => {\r\n        if (testNodeApi.error && nodeType && nodeType !== 'webhook') {\r\n\r\n            let errorMessage = 'Unexpected Error.';\r\n\r\n            if (testNodeApi.error.response && testNodeApi.error.response.data) {\r\n                errorMessage = testNodeApi.error.response.data;\r\n\r\n            } else if (testNodeApi.error.message) {\r\n                errorMessage = testNodeApi.error.message;\r\n            }\r\n            \r\n            setErrorResponse(errorMessage);\r\n            setOutputResponse([]);\r\n            const formValues = {\r\n                submit: null,\r\n                needRetest: null,\r\n                output: [],\r\n            };\r\n            onSubmit(formValues, 'outputResponses')\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [testNodeApi.error]);\r\n\r\n\r\n    // Test node loading\r\n    useEffect(() => {\r\n        if (nodeType && nodeType !== 'webhook') setTestNodeLoading(testNodeApi.loading);\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [testNodeApi.loading]);\r\n\r\n    return (\r\n        <>\r\n        <Box sx={{ width: 400 }}>\r\n            {nodeFlowData && nodeFlowData.outputResponses && nodeFlowData.outputResponses.needRetest && (\r\n                <Chip sx={{mb: 2}} icon={<IconExclamationMark />} label=\"Retest the node for updated parameters\" color=\"warning\" />\r\n            )}\r\n            {nodeName && nodeName === 'webhook' && (\r\n                <Box sx={{ mb: 3 }}>\r\n                    <Typography variant=\"h5\" sx={{ mb: 1 }}>{`${baseURL}/api/v1/webhook/${nodeFlowData.webhookEndpoint}`}</Typography>\r\n                    <Stack direction=\"row\" spacing={2}>\r\n                        <Button size=\"small\" variant=\"outlined\" startIcon={<IconCopy />} onClick={() => navigator.clipboard.writeText(`${baseURL}/api/v1/webhook/${nodeFlowData.webhookEndpoint}`)}>\r\n                            Copy URL\r\n                        </Button>\r\n                        <Button size=\"small\" variant=\"outlined\" startIcon={<IconArrowUpRightCircle />} onClick={() => window.open(`${baseURL}/api/v1/webhook/${nodeFlowData.webhookEndpoint}`, \"_blank\")}>\r\n                            Open in New Tab\r\n                        </Button>\r\n                    </Stack>\r\n                </Box>\r\n            )}\r\n            {errorResponse && (<Box sx={{mb: 2}}>\r\n                <Chip sx={{mb: 2}} icon={<IconX />} label=\"Error\" color=\"error\" />\r\n                <div style={{color: 'red'}}>{errorResponse}</div>\r\n            </Box>)}\r\n            <Box sx={{position: 'relative'}}>\r\n                <ReactJson collapsed src={outputResponse} enableClipboard={e => copyToClipboard(e)}/>\r\n                <IconButton \r\n                    size=\"small\" \r\n                    sx={{ \r\n                        height: 25, \r\n                        width: 25, \r\n                        position: 'absolute', \r\n                        top: -5, \r\n                        right: 5 \r\n                    }}\r\n                    title=\"Expand Data\"\r\n                    color=\"primary\"\r\n                    onClick={() => onExpandDialogClicked(outputResponse)}\r\n                >\r\n                    <IconArrowsMaximize />\r\n                </IconButton>\r\n                <div>\r\n                    {outputResponse.map((respObj, respObjIndex) =>\r\n                        <div key={respObjIndex}>\r\n\r\n                            {respObj.html && (\r\n                            <Typography sx={{p: 1, mt: 2}} variant=\"h5\">\r\n                                HTML\r\n                            </Typography>)}\r\n                            {respObj.html && <div style={{ width: '100%', height: '100%', maxHeight: 400, overflow: 'auto', backgroundColor: 'white', borderRadius: 5 }} dangerouslySetInnerHTML={{ __html: respObj.html }} />}\r\n                            {respObj.html && <Button sx={{ mt: 1}} size=\"small\" variant=\"contained\" onClick={() => openHTMLDialog(outputResponse)}>View HTML</Button>}\r\n\r\n                            {respObj.attachments && (\r\n                            <Typography sx={{p: 1, mt: 2, pb: 0}} variant=\"h5\">\r\n                                Attachments\r\n                            </Typography>)}\r\n                            {respObj.attachments && respObj.attachments.map((attachment, attchIndex) =>\r\n                                <div key={attchIndex}>\r\n                                    <Typography sx={{p: 1}} variant=\"h6\">\r\n                                        Item {respObjIndex} | {attachment.filename ? attachment.filename : `Attachment ${attchIndex}`}\r\n                                    </Typography>\r\n                                    <embed\r\n                                        src={attachment.content}\r\n                                        width=\"100%\"\r\n                                        height=\"100%\"\r\n                                        style={{ borderStyle: \"solid\" }}\r\n                                        type={attachment.contentType}\r\n                                    />\r\n                                    <Button size=\"small\" variant=\"contained\" onClick={() => openAttachmentDialog(outputResponse)}>View Attachment</Button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </Box>\r\n            <Box sx={{ mt: 2, position: 'relative' }}>\r\n                <AnimateButton>\r\n                    <Button\r\n                        disableElevation\r\n                        disabled={isTestNodeBtnDisabled || testNodeLoading}\r\n                        fullWidth\r\n                        size=\"large\"\r\n                        type=\"submit\"\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        onClick={() => onTestNodeClick(nodeType)}\r\n                    >\r\n                        Test Node\r\n                    </Button>\r\n                </AnimateButton >\r\n                {testNodeLoading && (<CircularProgress\r\n                    size={24} \r\n                    sx={{\r\n                        color: theme.palette.secondary.main,\r\n                        position: 'absolute',\r\n                        top: '50%',\r\n                        left: '50%',\r\n                        marginTop: '-12px',\r\n                        marginLeft: '-12px',\r\n                    }}\r\n                />)}\r\n            </Box>\r\n        </Box>\r\n        <AttachmentDialog\r\n            show={showAttachmentDialog}\r\n            dialogProps={attachmentDialogProps}\r\n            onCancel={() => setShowAttachmentDialog(false)}\r\n        ></AttachmentDialog>\r\n        <HTMLDialog\r\n            show={showHTMLDialog}\r\n            dialogProps={HTMLDialogProps}\r\n            onCancel={() => setShowHTMLDialog(false)}\r\n        ></HTMLDialog>\r\n        <ExpandDataDialog\r\n            show={showExpandDialog}\r\n            dialogProps={expandDialogProps}\r\n            onCancel={() => setShowExpandDialog(false)}\r\n        ></ExpandDataDialog>\r\n        </>\r\n    );\r\n};\r\n\r\nOutputResponses.propTypes = {\r\n    nodeId: PropTypes.string, \r\n    nodeParamsType: PropTypes.array,\r\n    nodeFlowData: PropTypes.object,\r\n    nodes: PropTypes.array, \r\n    edges: PropTypes.array, \r\n    workflow: PropTypes.object,\r\n    onSubmit: PropTypes.func,\r\n};\r\n\r\nexport default OutputResponses;\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { useTheme } from '@mui/material/styles';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\nimport {\r\n    Box,\r\n    Fab,\r\n    List,\r\n    Accordion,\r\n    AccordionSummary,\r\n    AccordionDetails,\r\n    Paper,\r\n    Popper,\r\n    Stack,\r\n    Typography,\r\n    IconButton,\r\n} from '@mui/material';\r\n\r\n// third-party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport ReactJson from 'react-json-view';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport Transitions from 'ui-component/extended/Transitions';\r\nimport ExpandDataDialog from 'ui-component/dialog/ExpandDataDialog';\r\n\r\n// icons\r\nimport { IconX, IconArrowsMaximize } from '@tabler/icons';\r\n\r\n// ==============================|| VARIABLE SELECTOR ||============================== //\r\n\r\nconst isPositiveNumeric = (value) =>  /^\\d+$/.test(value);\r\n\r\nconst VariableSelector = ({ nodes, isVariableSelectorOpen, anchorEl, onVariableSelected, handleClose }) => {\r\n    const theme = useTheme();\r\n    const [expanded, setExpanded] = useState(false);\r\n    const [open, setOpen] = useState(false);\r\n    const [showExpandDialog, setShowExpandDialog] = useState(false);\r\n    const [expandDialogProps, setExpandDialogProps] = useState({});\r\n\r\n    const varPrevOpen = useRef(open);\r\n\r\n    const handleAccordionChange = (nodeLabel) => (event, isExpanded) => {\r\n        setExpanded(isExpanded ? nodeLabel : false);\r\n    };\r\n\r\n    const onClipboardCopy = (e, node) => {\r\n        const namespaces = e.namespace;\r\n        let returnVariablePath = `${node.id}`;\r\n        for (let i = 0; i < namespaces.length; i+=1 ) {\r\n            const namespace = namespaces[i];\r\n            if (namespace !== 'root') {\r\n                if (isPositiveNumeric(namespace)) {\r\n                    if (returnVariablePath.endsWith('.')) {\r\n                        returnVariablePath = returnVariablePath.substring(0, returnVariablePath.length - 1);\r\n                    }\r\n                    returnVariablePath += `[${namespace}]`;\r\n                } else {\r\n                    returnVariablePath += namespace;\r\n                }\r\n                if (i !== namespaces.length - 1) {\r\n                    returnVariablePath += '.';\r\n                }\r\n            }\r\n        }\r\n        onVariableSelected(returnVariablePath);\r\n    };\r\n\r\n    const onExpandDialogClicked = (data, node) => {\r\n        const dialogProp = {\r\n            title: `Variable Data: ${node.data.label}`,\r\n            data,\r\n            node\r\n        };\r\n        setExpandDialogProps(dialogProp);\r\n        setShowExpandDialog(true);\r\n    };\r\n\r\n    // Handle Accordian\r\n    useEffect(() => {\r\n        varPrevOpen.current = open;\r\n\r\n    }, [open]);\r\n\r\n    useEffect(() => {\r\n        setOpen(isVariableSelectorOpen);\r\n    }, [isVariableSelectorOpen]);\r\n\r\n    return (\r\n        <>\r\n           <Popper\r\n                placement=\"right-start\"\r\n                open={open}\r\n                role={undefined}\r\n                transition\r\n                anchorEl={anchorEl}\r\n                disablePortal\r\n                popperOptions={{\r\n                    modifiers: [\r\n                        {\r\n                            name: 'offset',\r\n                            options: {\r\n                                offset: [55, 350]\r\n                            }\r\n                        }\r\n                    ]\r\n                }}\r\n                sx={{zIndex: 900, width: 350}}\r\n            >\r\n                {({ TransitionProps }) => (\r\n                    <Transitions in={open} {...TransitionProps}>\r\n                        <Paper>\r\n                            <Fab \r\n                                sx={{ \r\n                                    minHeight: 30, \r\n                                    height: 30, width: 30, \r\n                                    backgroundColor: theme.palette.secondary.light, \r\n                                    color: theme.palette.secondary.main, \r\n                                    position: 'absolute', \r\n                                    right: -10, top: -10 \r\n                                }} \r\n                                size=\"small\"\r\n                                onClick={handleClose}\r\n                            >\r\n                                <IconX />\r\n                            </Fab>\r\n                            <MainCard border={false} elevation={16} content={false} boxShadow shadow={theme.shadows[16]}>\r\n                                <Box sx={{ p: 2 }}>\r\n                                    <Stack>\r\n                                        <Typography variant=\"h4\">Variable Selector</Typography>\r\n                                    </Stack>\r\n                                    \r\n                                </Box>\r\n                                <PerfectScrollbar style={{ height: '100%', maxHeight: 'calc(100vh - 250px)', overflowX: 'hidden' }}>\r\n                                      \r\n                                    {nodes && nodes.length === 0 && <Box sx={{ p: 2 }}>No variables</Box>}\r\n\r\n                                    {nodes && nodes.length > 0 && (\r\n                                    <Box sx={{ p: 2 }}>\r\n                                        <List\r\n                                            sx={{\r\n                                                width: '100%',\r\n                                                maxWidth: 330,\r\n                                                py: 0,\r\n                                                borderRadius: '10px',\r\n                                                [theme.breakpoints.down('md')]: {\r\n                                                    maxWidth: 300\r\n                                                },\r\n                                                '& .MuiListItemSecondaryAction-root': {\r\n                                                    top: 22\r\n                                                },\r\n                                                '& .MuiDivider-root': {\r\n                                                    my: 0\r\n                                                },\r\n                                                '& .list-container': {\r\n                                                    pl: 7\r\n                                                }\r\n                                            }}\r\n                                        >\r\n                                            {nodes.map((node, index) => (\r\n                                                <Box key={index}>\r\n                                                    <Accordion expanded={expanded === node.data.label} onChange={handleAccordionChange(node.data.label)}>\r\n                                                        <AccordionSummary\r\n                                                            expandIcon={<ExpandMoreIcon />}\r\n                                                            aria-controls={`${node.data.label}-content`}\r\n                                                            id={`${node.data.label}-header`}\r\n                                                        >\r\n                                                            <Typography variant=\"h5\">\r\n                                                                {node.data.label}\r\n                                                            </Typography>\r\n                                                        </AccordionSummary>\r\n                                                        <AccordionDetails>\r\n                                                            <div style={{position: 'relative'}}>\r\n                                                                <ReactJson collapsed src={(node.data.outputResponses && node.data.outputResponses.output) ? node.data.outputResponses.output : {}} enableClipboard={e => onClipboardCopy(e, node)}/>\r\n                                                                <IconButton \r\n                                                                    size=\"small\" \r\n                                                                    sx={{ \r\n                                                                        height: 25, \r\n                                                                        width: 25, \r\n                                                                        position: 'absolute', \r\n                                                                        top: -5, \r\n                                                                        right: 5 \r\n                                                                    }}\r\n                                                                    title=\"Expand Variable\"\r\n                                                                    color=\"primary\"\r\n                                                                    onClick={() => onExpandDialogClicked((node.data.outputResponses && node.data.outputResponses.output) ? node.data.outputResponses.output : {}, node)}\r\n                                                                >\r\n                                                                    <IconArrowsMaximize />\r\n                                                                </IconButton>\r\n                                                            </div>\r\n                                                        </AccordionDetails>\r\n                                                    </Accordion>\r\n                                                </Box>\r\n                                            ))}\r\n                                        </List>\r\n                                    </Box>\r\n                                    )}\r\n                                </PerfectScrollbar>\r\n                            </MainCard>\r\n                        </Paper>\r\n                    </Transitions>\r\n                )}\r\n            </Popper>\r\n            <ExpandDataDialog\r\n                enableClipboard\r\n                show={showExpandDialog}\r\n                dialogProps={expandDialogProps}\r\n                onCancel={() => setShowExpandDialog(false)}\r\n                onCopyClick={(e, node) => {\r\n                    onClipboardCopy(e, node);\r\n                    setShowExpandDialog(false);\r\n                }}                                                \r\n            ></ExpandDataDialog>\r\n        </>\r\n    );\r\n};\r\n\r\nVariableSelector.propTypes = {\r\n    nodes: PropTypes.array,\r\n    isVariableSelectorOpen: PropTypes.bool,\r\n    anchorEl: PropTypes.any,\r\n    onVariableSelected: PropTypes.func,\r\n    handleClose: PropTypes.func,\r\n};\r\n\r\nexport default VariableSelector;\r\n","import { useState, useRef, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// material-ui\r\nimport { useTheme } from '@mui/material/styles';\r\nimport {\r\n    Accordion,\r\n    AccordionSummary,\r\n    AccordionDetails,\r\n    Box,\r\n    Fab,\r\n    ClickAwayListener,\r\n    Divider,\r\n    Paper,\r\n    Stack,\r\n    Popper,\r\n    Typography,\r\n    TextField,\r\n    Avatar,\r\n} from '@mui/material';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\n\r\n// third-party\r\nimport PerfectScrollbar from 'react-perfect-scrollbar';\r\nimport * as Yup from 'yup';\r\nimport lodash from 'lodash';\r\n\r\n// project imports\r\nimport MainCard from 'ui-component/cards/MainCard';\r\nimport Transitions from 'ui-component/extended/Transitions';\r\nimport InputParameters from 'views/inputs/InputParameters';\r\nimport CredentialInput from 'views/inputs/CredentialInput';\r\nimport OutputResponses from 'views/output/OutputResponses';\r\nimport VariableSelector from './VariableSelector';\r\nimport EditVariableDialog from 'ui-component/dialog/EditVariableDialog';\r\n\r\n// API\r\nimport nodesApi from \"api/nodes\";\r\n\r\n// Hooks\r\nimport useApi from \"hooks/useApi\";\r\n\r\n// icons\r\nimport { IconPencil, IconMinus, IconCheck } from '@tabler/icons';\r\n\r\n// utils\r\nimport { getAvailableNodeIdsForVariable, numberOrExpressionRegex, handleCredentialParams } from 'utils/genericHelper';\r\n\r\n// ==============================|| EDIT NODES||============================== //\r\n\r\nconst EditNodes = ({ node, nodes, edges, workflow, onNodeLabelUpdate, onNodeValuesUpdate }) => {\r\n\r\n    const theme = useTheme();\r\n\r\n    const [nodeFlowData, setNodeFlowData] = useState(null);\r\n    const [nodeLabel, setNodeLabel] = useState('');\r\n    const [expanded, setExpanded] = useState(false);\r\n    const [open, setOpen] = useState(false);\r\n    const [nodeDetails, setNodeDetails] = useState(null);\r\n    const [nodeParams, setNodeParams] = useState([]);\r\n    const [nodeParamsType, setNodeParamsType] = useState([]);\r\n    const [nodeParamsInitialValues, setNodeParamsInitialValues] = useState({});\r\n    const [nodeParamsValidation, setNodeParamsValidation] = useState({});\r\n    const [isVariableSelectorOpen, setVariableSelectorOpen] = useState(false);\r\n    const [variableBody, setVariableBody] = useState({});\r\n    const [availableNodesForVariable, setAvailableNodesForVariable] = useState(null);\r\n    const [isEditVariableDialogOpen, setEditVariableDialog] = useState(false);\r\n    const [editVariableDialogProps, setEditVariableDialogProps] = useState({});\r\n\r\n    const anchorRef = useRef(null);\r\n    const ps = useRef();\r\n\r\n    const getSpecificNodeApi = useApi(nodesApi.getSpecificNode);\r\n \r\n    const scrollTop = () => {\r\n        const curr = ps.current;\r\n        if (curr) {\r\n            curr.scrollTop = 0;\r\n        }\r\n    };\r\n\r\n    const handleClose = (event) => {\r\n        if (anchorRef.current && anchorRef.current.contains(event.target)) {\r\n            return;\r\n        }\r\n        setOpen(false);\r\n        setVariableSelectorOpen(false);\r\n    };\r\n\r\n    const handleToggle = () => {\r\n        setOpen((prevOpen) => !prevOpen);\r\n        if (open) setVariableSelectorOpen(false);\r\n    };\r\n\r\n    const handleAccordionChange = (paramsType) => (event, isExpanded) => {\r\n        setExpanded(isExpanded ? paramsType : false);\r\n        scrollTop();\r\n    };\r\n\r\n    const handleNodeLabelChange = (event) => {\r\n        setNodeLabel(event.target.value);\r\n    };\r\n\r\n    const saveNodeLabel = () => {\r\n        onNodeLabelUpdate(nodeLabel);\r\n    };\r\n\r\n    const onEditVariableDialogOpen = (input, values, arrayItemBody) => {\r\n        const variableNodesIds = getAvailableNodeIdsForVariable(nodes, edges, node.id);\r\n           \r\n        const nodesForVariable = [];\r\n        for (let i = 0; i < variableNodesIds.length; i+=1 ) {\r\n            const nodeId = variableNodesIds[i];\r\n            const node = nodes.find((nd) => nd.id === nodeId);\r\n            nodesForVariable.push(node);\r\n        }\r\n\r\n        const dialogProps = {\r\n            input,\r\n            values,\r\n            arrayItemBody,\r\n            availableNodesForVariable: nodesForVariable,\r\n            cancelButtonName: 'Cancel',\r\n            confirmButtonName: 'Save',\r\n        }\r\n\r\n        setEditVariableDialogProps(dialogProps);\r\n        setEditVariableDialog(true);\r\n    }\r\n    \r\n    const setVariableSelectorState = (variableSelectorState, body) => {\r\n        setVariableSelectorOpen(variableSelectorState);\r\n        if (body) {\r\n            setVariableBody(body);\r\n            const variableNodesIds = getAvailableNodeIdsForVariable(nodes, edges, node.id);\r\n           \r\n            const nodesForVariable = [];\r\n            for (let i = 0; i < variableNodesIds.length; i+=1 ) {\r\n                const nodeId = variableNodesIds[i];\r\n                const node = nodes.find((nd) => nd.id === nodeId);\r\n                nodesForVariable.push(node);\r\n            }\r\n            setAvailableNodesForVariable(nodesForVariable);\r\n        }\r\n    };\r\n\r\n    const paramsChanged = (formParams, paramsType) => {\r\n\r\n        // Because formParams options can be changed due to show hide options, \r\n        // To avoid that, replace with original details options\r\n\r\n        const credentialMethodParam = formParams.find((param) => param.name === 'credentialMethod');\r\n        const credentialMethodParamIndex = formParams.findIndex((param) => param.name === 'credentialMethod');\r\n        \r\n        if (credentialMethodParam !== undefined) {\r\n            const originalParam = nodeDetails[paramsType].find((param) => param.name === 'credentialMethod');\r\n            if (originalParam !== undefined) {\r\n                formParams[credentialMethodParamIndex]['options'] = originalParam.options;\r\n            }\r\n        }\r\n\r\n        const updateNodeDetails = {\r\n            ...nodeDetails,\r\n            [paramsType]: formParams\r\n        };\r\n        setNodeDetails(updateNodeDetails);\r\n    };\r\n\r\n    const valueChanged = (formValues, paramsType) => {\r\n        const updateNodeFlowData = {\r\n            ...nodeFlowData,\r\n            [paramsType]: formValues\r\n        };\r\n        // If input parameters change, notify output has to be retest\r\n        if (nodeFlowData.outputResponses) {\r\n            const outputResponsesFlowData = nodeFlowData.outputResponses;\r\n            outputResponsesFlowData.submit = null;\r\n            outputResponsesFlowData.needRetest = true;\r\n            updateNodeFlowData.outputResponses = outputResponsesFlowData;\r\n        }\r\n\r\n        setNodeFlowData(updateNodeFlowData);\r\n        onNodeValuesUpdate(updateNodeFlowData);\r\n    };\r\n\r\n    const onVariableSelected = (returnVariablePath) => {\r\n        if (variableBody) {\r\n            const path = variableBody.path;\r\n            const paramsType = variableBody.paramsType;\r\n            const newInput = `${variableBody.textBeforeCursorPosition}{{${returnVariablePath}}}${variableBody.textAfterCursorPosition}`;\r\n            const clonedNodeFlowData = lodash.cloneDeep(nodeFlowData);\r\n            lodash.set(clonedNodeFlowData, path, newInput);\r\n            valueChanged(clonedNodeFlowData[paramsType], paramsType);\r\n        }\r\n    }\r\n\r\n    const onSubmit = (formValues, paramsType) => {\r\n        const updateNodeFlowData = {\r\n            ...nodeFlowData,\r\n            [paramsType]: formValues\r\n        };\r\n        setNodeFlowData(updateNodeFlowData);\r\n        onNodeValuesUpdate(updateNodeFlowData);\r\n\r\n        const index = nodeParamsType.indexOf(paramsType);\r\n        if (index >= 0 && index !== nodeParamsType.length - 1) {\r\n            setExpanded(nodeParamsType[index+1]);\r\n            scrollTop();\r\n        }\r\n    };\r\n\r\n    const showHideParameters = (input, displayType, index, toBeDeleteParams) => {\r\n        const displayOptions = input[displayType];\r\n        Object.keys(displayOptions).forEach((path) => {\r\n            const comparisonValue = displayOptions[path];\r\n            if (path.includes(\"$index\")) {\r\n                path = path.replace(\"$index\", index);\r\n            }\r\n            const groundValue = lodash.get(nodeFlowData, path, '');\r\n\r\n            if (Array.isArray(comparisonValue)) {\r\n                if (displayType === 'show' && !comparisonValue.includes(groundValue)) {\r\n                    toBeDeleteParams.push(input);\r\n                }\r\n                if (displayType === 'hide' && comparisonValue.includes(groundValue)) {\r\n                    toBeDeleteParams.push(input);\r\n                }\r\n            } else if (typeof comparisonValue === 'string') {\r\n                if (displayType === 'show' && !((comparisonValue === groundValue) || (new RegExp(comparisonValue).test(groundValue)))) {\r\n                    toBeDeleteParams.push(input);\r\n                }\r\n                if (displayType === 'hide' && ((comparisonValue === groundValue) || (new RegExp(comparisonValue).test(groundValue)))) {\r\n                    toBeDeleteParams.push(input);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    const displayParameters = (params, paramsType, arrayIndex) => {\r\n        const toBeDeleteParams = [];\r\n \r\n        for (let i = 0; i < params.length; i+= 1) {\r\n            const input = params[i];\r\n\r\n            if (input.type === 'array') {\r\n                const arrayInitialValue = lodash.get(nodeFlowData, `${paramsType}.${input.name}`, []);\r\n                const inputArray = [];\r\n                for (let j = arrayIndex; j < arrayInitialValue.length; j+= 1) {\r\n                    inputArray.push(displayParameters(input.array || [], paramsType, j));\r\n                }\r\n                input.arrayParams = inputArray;\r\n            }\r\n            if (input.show) {\r\n                showHideParameters(input, 'show', arrayIndex, toBeDeleteParams);\r\n            }\r\n            if (input.hide) {\r\n                showHideParameters(input, 'hide', arrayIndex, toBeDeleteParams);\r\n            }\r\n        }\r\n\r\n        let returnParams = params;\r\n        for (let i = 0; i < toBeDeleteParams.length; i+= 1) {\r\n            returnParams = returnParams.filter((prm) => JSON.stringify(prm) !== JSON.stringify(toBeDeleteParams[i]));\r\n        }\r\n        return returnParams;\r\n    };\r\n\r\n    const showHideOptions = (displayType, index, options) => {\r\n       \r\n        let returnOptions = options;\r\n        const toBeDeleteOptions = [];\r\n\r\n        for (let i = 0; i < returnOptions.length; i+= 1) {\r\n            const option = returnOptions[i];\r\n            const displayOptions = option[displayType];\r\n            if (displayOptions) {\r\n                Object.keys(displayOptions).forEach((path) => {\r\n                    const comparisonValue = displayOptions[path];\r\n\r\n                    if (path.includes(\"$index\")) {\r\n                        path = path.replace(\"$index\", index);\r\n                    }\r\n                    const groundValue = lodash.get(nodeFlowData, path, '');\r\n\r\n                    if (Array.isArray(comparisonValue)) {\r\n                        if (displayType === 'show' && !comparisonValue.includes(groundValue)) {\r\n                            toBeDeleteOptions.push(option);\r\n                        }\r\n                        if (displayType === 'hide' && comparisonValue.includes(groundValue)) {\r\n                            toBeDeleteOptions.push(option);\r\n                        }\r\n                    } else if (typeof comparisonValue === 'string') {\r\n                        if (displayType === 'show' && !((comparisonValue === groundValue) || (new RegExp(comparisonValue).test(groundValue)))) {\r\n                            toBeDeleteOptions.push(option);\r\n                        }\r\n                        if (displayType === 'hide' && ((comparisonValue === groundValue) || (new RegExp(comparisonValue).test(groundValue)))) {\r\n                            toBeDeleteOptions.push(option);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < toBeDeleteOptions.length; i+= 1) {\r\n            returnOptions = returnOptions.filter((opt) => JSON.stringify(opt) !== JSON.stringify(toBeDeleteOptions[i]));\r\n        }\r\n\r\n        return returnOptions;\r\n    }\r\n\r\n    const displayOptions = (params, paramsType, arrayIndex) => {\r\n      \r\n        let clonedParams = params;\r\n\r\n        for (let i = 0; i < clonedParams.length; i+= 1) {\r\n            const input = clonedParams[i];\r\n\r\n            if (input.type === 'array') {\r\n                const arrayInitialValue = lodash.get(nodeFlowData, `${paramsType}.${input.name}`, []);\r\n                const inputArray = [];\r\n                for (let j = arrayIndex; j < arrayInitialValue.length; j+= 1) {\r\n                    inputArray.push(displayOptions(input.arrayParams[j] || [], paramsType, j));\r\n                }\r\n                input.arrayParams = inputArray;\r\n            }\r\n            \r\n            if (input.type === 'options') {\r\n                input.options = showHideOptions('show', arrayIndex, input.options);\r\n                input.options = showHideOptions('hide', arrayIndex, input.options);\r\n            }\r\n        }\r\n      \r\n        return clonedParams;\r\n    };\r\n\r\n    const setYupValidation = (params) => {\r\n        const validationSchema = {};\r\n        for (let i = 0; i < params.length; i+= 1) {\r\n            const input = params[i];\r\n            let inputOptional = input.optional;\r\n\r\n            if (typeof input.optional === 'object' && input.optional !== null) {\r\n                const keys = Object.keys(input.optional);\r\n                inputOptional = true;\r\n                for (let j = 0; j < keys.length; j+= 1) {\r\n                    const path = keys[j];\r\n                    const comparisonValue = input.optional[path];\r\n                    const groundValue = lodash.get(nodeFlowData, path, '');\r\n\r\n                    if (Array.isArray(comparisonValue)) {\r\n                        inputOptional = inputOptional && comparisonValue.includes(groundValue);\r\n                        \r\n                    } else if (typeof comparisonValue === 'string') {\r\n                        inputOptional = inputOptional && ((comparisonValue === groundValue) || (new RegExp(comparisonValue).test(groundValue)));\r\n                    }\r\n                }\r\n            }\r\n\r\n            if ((\r\n                input.type === 'string' || \r\n                input.type === 'password' || \r\n                input.type === 'date' || \r\n                input.type === 'code' || \r\n                input.type === 'json' || \r\n                input.type === 'file' || \r\n                input.type === 'options' || \r\n                input.type === 'asyncOptions'\r\n                ) && !inputOptional ) {\r\n                validationSchema[input.name] = Yup.string().required(`${input.label} is required. Type: ${input.type}`);\r\n\r\n            } else if (input.type === 'number' && !inputOptional) {\r\n                validationSchema[input.name] = Yup.string().required(`${input.label} is required. Type: ${input.type}`).matches(\r\n                    numberOrExpressionRegex,\r\n                    `${input.label} must be numbers or a variable expression.`\r\n                );\r\n\r\n            }  else if (input.type === 'array' && !inputOptional) {\r\n                /*\r\n                ************\r\n                * Limitation on different object shape within array: https://github.com/jquense/yup/issues/757\r\n                ************\r\n                const innerValidationSchema = setYupValidation(input.arrayParams);\r\n                validationSchema[input.name] = Yup.array(Yup.object(innerValidationSchema)).required(`Must have ${input.label}`).min(1, `Minimum of 1 ${input.label}`);\r\n                */\r\n            }\r\n        }\r\n        return validationSchema;\r\n    };\r\n\r\n    const initializeFormValuesAndParams = (paramsType) => {\r\n\r\n        const initialValues = {};\r\n\r\n        const reorganizedParams = displayParameters(nodeDetails[paramsType] || [], paramsType, 0);\r\n        let nodeParams = displayOptions(lodash.cloneDeep(reorganizedParams), paramsType, 0);\r\n\r\n        nodeParams = handleCredentialParams(nodeParams, paramsType, reorganizedParams, nodeFlowData);\r\n        \r\n        for (let i = 0; i < nodeParams.length; i+= 1) {\r\n            const input = nodeParams[i];\r\n\r\n            // Load from nodeFlowData values\r\n            if (paramsType in nodeFlowData && input.name in nodeFlowData[paramsType]) {\r\n                initialValues[input.name] = nodeFlowData[paramsType][input.name];\r\n         \r\n                // Check if option value is still available from the list of options\r\n                if (input.type === 'options') {\r\n                    const optionVal = input.options.find((option) => option.name === initialValues[input.name]);\r\n                    if (!optionVal) delete initialValues[input.name];\r\n                }\r\n            } else {\r\n                // Load from nodeParams default values\r\n                initialValues[input.name] = input.default || '';\r\n\r\n                // Special case for array, always initialize the item if default is not set\r\n                if (input.type === 'array' && !input.default) {\r\n                    const newObj = {};\r\n                    for (let j = 0; j < input.array.length; j+= 1) {\r\n                        newObj[input.array[j].name] = input.array[j].default || '';\r\n                    }\r\n                    initialValues[input.name] = [newObj];\r\n                }\r\n            }\r\n        }\r\n        \r\n        initialValues.submit = null;\r\n        \r\n        setNodeParamsInitialValues(initialValues);\r\n        setNodeParamsValidation(setYupValidation(nodeParams));\r\n        setNodeParams(nodeParams);\r\n    };\r\n\r\n    // Handle Accordian\r\n    const prevOpen = useRef(open);\r\n    useEffect(() => {\r\n        if (prevOpen.current === true && open === false) {\r\n            anchorRef.current.focus();\r\n        }\r\n\r\n        prevOpen.current = open;\r\n\r\n    }, [open]);\r\n\r\n\r\n    // Get Node Details from API\r\n    useEffect(() => {\r\n        if (getSpecificNodeApi.data) {\r\n\r\n            const nodeDetails = getSpecificNodeApi.data;\r\n\r\n            setNodeDetails(nodeDetails);\r\n\r\n            const nodeParamsType = [];\r\n\r\n            if (nodeDetails.actions) nodeParamsType.push('actions');\r\n            if (nodeDetails.networks) nodeParamsType.push('networks');\r\n            if (nodeDetails.credentials) nodeParamsType.push('credentials');\r\n            if (nodeDetails.inputParameters) nodeParamsType.push('inputParameters');\r\n            nodeParamsType.push('outputResponses');\r\n\r\n            setNodeParamsType(nodeParamsType);\r\n\r\n            if (nodeParamsType.length) {\r\n                setExpanded(nodeParamsType[0]);\r\n                scrollTop();\r\n            }\r\n        }\r\n\r\n    }, [getSpecificNodeApi.data]); \r\n\r\n   \r\n    // Initialization\r\n    useEffect(() => {\r\n        if (node) {\r\n            setOpen(true);\r\n            setNodeLabel(node.data.label);\r\n            setNodeFlowData(node.data);\r\n            getSpecificNodeApi.request(node.data.name);\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [node]); \r\n\r\n\r\n    // Initialize Parameters Initial Values & Validation\r\n    useEffect(() => {\r\n        if (nodeDetails && nodeFlowData && expanded) {\r\n            initializeFormValuesAndParams(expanded);\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [nodeDetails, nodeFlowData, expanded]);\r\n\r\n    return (\r\n        <>\r\n            <Fab \r\n                sx={{ left: 40, top: 20 }} \r\n                ref={anchorRef}\r\n                size=\"small\" \r\n                color=\"secondary\" \r\n                onClick={handleToggle}\r\n                title=\"Edit Node\"\r\n            >\r\n                {open ? <IconMinus /> : <IconPencil />}\r\n            </Fab>\r\n            <Popper\r\n                placement=\"bottom-end\"\r\n                open={open}\r\n                anchorEl={anchorRef.current}\r\n                role={undefined}\r\n                transition\r\n                disablePortal\r\n                popperOptions={{\r\n                    modifiers: [\r\n                        {\r\n                            name: 'offset',\r\n                            options: {\r\n                                offset: [-80, 14]\r\n                            }\r\n                        }\r\n                    ]\r\n                }}\r\n                sx={{zIndex: 1000}}\r\n            >\r\n                {({ TransitionProps }) => (\r\n                    <Transitions in={open} {...TransitionProps}>\r\n                        <Paper>\r\n                            <ClickAwayListener onClickAway={handleClose}>\r\n                                <MainCard border={false} elevation={16} content={false} boxShadow shadow={theme.shadows[16]}>\r\n                                    <Box sx={{ p: 2 }}>\r\n                                        <Stack>\r\n                                            <Typography variant=\"h4\">Edit Nodes</Typography>\r\n                                        </Stack>\r\n                                    </Box>\r\n                                    <PerfectScrollbar containerRef={(el) => {ps.current = el}} style={{ height: '100%', maxHeight: 'calc(100vh - 250px)', overflowX: 'hidden' }}>\r\n                                        \r\n                                        {!node && <Box sx={{ p: 2 }}>No data</Box>}\r\n\r\n                                        {nodeFlowData && nodeFlowData.label && (\r\n                                            <Box sx={{ pl: 4, pr: 4, pt: 2, pb: 2, textAlign: 'center', display: 'flex', flexDirection: 'row', alignItems: 'center' }}>\r\n                                                <TextField \r\n                                                    id={nodeFlowData.name}\r\n                                                    label=\"Node Label\"\r\n                                                    variant=\"outlined\"\r\n                                                    value={nodeLabel}\r\n                                                    onChange={handleNodeLabelChange}\r\n                                                    fullWidth\r\n                                                />\r\n                                                <Fab \r\n                                                    sx={{ \r\n                                                        minHeight: 10, \r\n                                                        height: 27, width: 30, \r\n                                                        backgroundColor: theme.palette.secondary.light, \r\n                                                        color: theme.palette.secondary.main, \r\n                                                        ml: 2\r\n                                                    }} \r\n                                                    size=\"small\"\r\n                                                    title=\"Validate and Save\"\r\n                                                    onClick={saveNodeLabel}\r\n                                                >\r\n                                                    <IconCheck />\r\n                                                </Fab>\r\n                                                \r\n                                            </Box>\r\n                                        )}\r\n\r\n                                        {/* actions */}\r\n                                        {nodeParamsType.includes('actions') && \r\n                                            (<Box sx={{ p: 2 }}>\r\n                                                <Accordion expanded={expanded === 'actions'} onChange={handleAccordionChange('actions')}>\r\n                                                    <AccordionSummary\r\n                                                        expandIcon={<ExpandMoreIcon />}\r\n                                                        aria-controls=\"actions-content\"\r\n                                                        id=\"actions-header\" \r\n                                                    >\r\n                                                        <Typography variant=\"h4\">\r\n                                                            Actions\r\n                                                        </Typography>\r\n                                                        {nodeFlowData && nodeFlowData.actions && nodeFlowData.actions.submit &&\r\n                                                        (<Avatar\r\n                                                            variant=\"rounded\"\r\n                                                            sx={{\r\n                                                                ...theme.typography.smallAvatar,\r\n                                                                borderRadius: '50%',\r\n                                                                background: theme.palette.success.dark,\r\n                                                                color: 'white',\r\n                                                                ml: 2\r\n                                                            }}\r\n                                                        >\r\n                                                            <IconCheck />\r\n                                                        </Avatar>)}\r\n                                                    </AccordionSummary>\r\n                                                    <AccordionDetails>\r\n                                                        <InputParameters \r\n                                                            key={node.id} // to reload whenever node changed\r\n                                                            params={nodeParams} \r\n                                                            paramsType=\"actions\"\r\n                                                            initialValues={nodeParamsInitialValues} \r\n                                                            nodeParamsValidation={nodeParamsValidation}\r\n                                                            nodeFlowData={nodeFlowData}\r\n                                                            setVariableSelectorState={setVariableSelectorState}\r\n                                                            onEditVariableDialogOpen={onEditVariableDialogOpen}\r\n                                                            valueChanged={valueChanged}\r\n                                                            onSubmit={onSubmit}\r\n                                                        />\r\n                                                    </AccordionDetails>\r\n                                                </Accordion>\r\n                                                <Divider />\r\n                                            </Box>)\r\n                                        }\r\n\r\n                                        {/* networks */}\r\n                                        {nodeParamsType.includes('networks') && \r\n                                            (<Box sx={{ p: 2 }}>\r\n                                                <Accordion expanded={expanded === 'networks'} onChange={handleAccordionChange('networks')}>\r\n                                                    <AccordionSummary\r\n                                                        expandIcon={<ExpandMoreIcon />}\r\n                                                        aria-controls=\"networks-content\"\r\n                                                        id=\"networks-header\" \r\n                                                    >\r\n                                                        <Typography variant=\"h4\">\r\n                                                            Networks\r\n                                                        </Typography>\r\n                                                        {nodeFlowData && nodeFlowData.networks && nodeFlowData.networks.submit &&\r\n                                                        (<Avatar\r\n                                                            variant=\"rounded\"\r\n                                                            sx={{\r\n                                                                ...theme.typography.smallAvatar,\r\n                                                                borderRadius: '50%',\r\n                                                                background: theme.palette.success.dark,\r\n                                                                color: 'white',\r\n                                                                ml: 2\r\n                                                            }}\r\n                                                        >\r\n                                                            <IconCheck />\r\n                                                        </Avatar>)}\r\n                                                    </AccordionSummary>\r\n                                                    <AccordionDetails>\r\n                                                        <InputParameters \r\n                                                            key={node.id} // to reload whenever node changed\r\n                                                            params={nodeParams} \r\n                                                            paramsType=\"networks\"\r\n                                                            initialValues={nodeParamsInitialValues} \r\n                                                            nodeParamsValidation={nodeParamsValidation}\r\n                                                            nodeFlowData={nodeFlowData}\r\n                                                            setVariableSelectorState={setVariableSelectorState}\r\n                                                            onEditVariableDialogOpen={onEditVariableDialogOpen}\r\n                                                            valueChanged={valueChanged}\r\n                                                            onSubmit={onSubmit}\r\n                                                        />\r\n                                                    </AccordionDetails>\r\n                                                </Accordion>\r\n                                                <Divider />\r\n                                            </Box>)\r\n                                        }\r\n\r\n                                        {/* credentials */}\r\n                                        {nodeParamsType.includes('credentials') && \r\n                                            (<Box sx={{ p: 2 }}>\r\n                                                <Accordion expanded={expanded === 'credentials'} onChange={handleAccordionChange('credentials')}>\r\n                                                    <AccordionSummary\r\n                                                        expandIcon={<ExpandMoreIcon />}\r\n                                                        aria-controls=\"credentials-content\"\r\n                                                        id=\"credentials-header\" \r\n                                                    >\r\n                                                        <Typography variant=\"h4\">\r\n                                                            Credentials\r\n                                                        </Typography>\r\n                                                        {nodeFlowData && nodeFlowData.credentials && nodeFlowData.credentials.submit &&\r\n                                                        (<Avatar\r\n                                                            variant=\"rounded\"\r\n                                                            sx={{\r\n                                                                ...theme.typography.smallAvatar,\r\n                                                                borderRadius: '50%',\r\n                                                                background: theme.palette.success.dark,\r\n                                                                color: 'white',\r\n                                                                ml: 2\r\n                                                            }}\r\n                                                        >\r\n                                                            <IconCheck />\r\n                                                        </Avatar>)}\r\n                                                    </AccordionSummary>\r\n                                                    <AccordionDetails>\r\n                                                        <CredentialInput \r\n                                                            key={node.id} // to reload whenever node changed\r\n                                                            initialParams={nodeParams} \r\n                                                            paramsType=\"credentials\"\r\n                                                            initialValues={nodeParamsInitialValues} \r\n                                                            initialValidation={nodeParamsValidation}\r\n                                                            valueChanged={valueChanged}\r\n                                                            paramsChanged={paramsChanged}\r\n                                                            onSubmit={onSubmit}\r\n                                                        />\r\n                                                    </AccordionDetails>\r\n                                                </Accordion>\r\n                                                <Divider />\r\n                                            </Box>)\r\n                                        }\r\n\r\n                                        {/* inputParameters */}\r\n                                        {nodeParamsType.includes('inputParameters') && \r\n                                            (<Box sx={{ p: 2 }}>\r\n                                                <Accordion expanded={expanded === 'inputParameters'} onChange={handleAccordionChange('inputParameters')}>\r\n                                                    <AccordionSummary\r\n                                                        expandIcon={<ExpandMoreIcon />}\r\n                                                        aria-controls=\"inputParameters-content\"\r\n                                                        id=\"inputParameters-header\" \r\n                                                    >\r\n                                                        <Typography variant=\"h4\">\r\n                                                            Input Parameters\r\n                                                        </Typography>\r\n                                                        {nodeFlowData && nodeFlowData.inputParameters && nodeFlowData.inputParameters.submit &&\r\n                                                        (<Avatar\r\n                                                            variant=\"rounded\"\r\n                                                            sx={{\r\n                                                                ...theme.typography.smallAvatar,\r\n                                                                borderRadius: '50%',\r\n                                                                background: theme.palette.success.dark,\r\n                                                                color: 'white',\r\n                                                                ml: 2\r\n                                                            }}\r\n                                                        >\r\n                                                            <IconCheck />\r\n                                                        </Avatar>)}\r\n                                                    </AccordionSummary>\r\n                                                    <AccordionDetails>\r\n                                                        <InputParameters \r\n                                                            key={node.id} // to reload whenever node changed\r\n                                                            params={nodeParams} \r\n                                                            paramsType=\"inputParameters\"\r\n                                                            initialValues={nodeParamsInitialValues}\r\n                                                            nodeParamsValidation={nodeParamsValidation}\r\n                                                            nodeFlowData={nodeFlowData}\r\n                                                            setVariableSelectorState={setVariableSelectorState}\r\n                                                            onEditVariableDialogOpen={onEditVariableDialogOpen}\r\n                                                            valueChanged={valueChanged}\r\n                                                            onSubmit={onSubmit}\r\n                                                        />\r\n                                                    </AccordionDetails>\r\n                                                </Accordion>\r\n                                                <Divider />\r\n                                            </Box>)\r\n                                        }\r\n\r\n                                        {/* outputResponses */}\r\n                                        {nodeDetails && nodeFlowData && \r\n                                            (<Box sx={{ p: 2 }}>\r\n                                                <Accordion expanded={expanded === 'outputResponses'} onChange={handleAccordionChange('outputResponses')}>\r\n                                                    <AccordionSummary\r\n                                                        expandIcon={<ExpandMoreIcon />}\r\n                                                        aria-controls=\"outputResponses-content\"\r\n                                                        id=\"outputResponses-header\" \r\n                                                    >\r\n                                                        <Typography variant=\"h4\">\r\n                                                            Output Responses\r\n                                                        </Typography>\r\n                                                        {nodeFlowData && nodeFlowData.outputResponses && nodeFlowData.outputResponses.submit &&\r\n                                                        (<Avatar\r\n                                                            variant=\"rounded\"\r\n                                                            sx={{\r\n                                                                ...theme.typography.smallAvatar,\r\n                                                                borderRadius: '50%',\r\n                                                                background: theme.palette.success.dark,\r\n                                                                color: 'white',\r\n                                                                ml: 2\r\n                                                            }}\r\n                                                        >\r\n                                                            <IconCheck />\r\n                                                        </Avatar>)}\r\n                                                    </AccordionSummary>\r\n                                                    <AccordionDetails>\r\n                                                        <OutputResponses \r\n                                                            key={node.id} // to reload whenever node changed\r\n                                                            nodeId={node.id}\r\n                                                            nodeParamsType={nodeParamsType}\r\n                                                            nodeFlowData={nodeFlowData}\r\n                                                            nodes={nodes}\r\n                                                            edges={edges}\r\n                                                            workflow={workflow}\r\n                                                            onSubmit={onSubmit}\r\n                                                        />\r\n                                                    </AccordionDetails>\r\n                                                </Accordion>\r\n                                                <Divider />\r\n                                            </Box>)\r\n                                        }\r\n                                    </PerfectScrollbar>\r\n                                    <VariableSelector \r\n                                        key={JSON.stringify(availableNodesForVariable)} \r\n                                        nodes={availableNodesForVariable} \r\n                                        isVariableSelectorOpen={isVariableSelectorOpen} \r\n                                        anchorEl={anchorRef.current}\r\n                                        onVariableSelected={(returnVariablePath) => onVariableSelected(returnVariablePath)} \r\n                                        handleClose={() => setVariableSelectorOpen(false)}\r\n                                    />\r\n                                    <EditVariableDialog \r\n                                        key={JSON.stringify(editVariableDialogProps)} \r\n                                        show={isEditVariableDialogOpen}\r\n                                        dialogProps={editVariableDialogProps}\r\n                                        onCancel={() => setEditVariableDialog(false)}\r\n                                        onConfirm={(updateValues) => {\r\n                                            valueChanged(updateValues, expanded);\r\n                                            setEditVariableDialog(false);\r\n                                        }}\r\n                                    />\r\n                                </MainCard>\r\n                            </ClickAwayListener>\r\n                        </Paper>\r\n                    </Transitions>\r\n                )}\r\n            </Popper>\r\n        </>\r\n    );\r\n};\r\n\r\nEditNodes.propTypes = {\r\n    node: PropTypes.object,\r\n    nodes: PropTypes.array,\r\n    edges: PropTypes.array,\r\n    workflow: PropTypes.object,\r\n    onNodeLabelUpdate: PropTypes.func,\r\n    onNodeValuesUpdate: PropTypes.func,\r\n};\r\n\r\nexport default EditNodes;\r\n","import { createPortal } from 'react-dom';\r\nimport { \r\n    Button, \r\n    Dialog, \r\n    DialogActions,\r\n    DialogContent, \r\n    DialogContentText,\r\n    DialogTitle \r\n} from '@mui/material';\r\nimport useConfirm from 'hooks/useConfirm';\r\n\r\nconst ConfirmDialog = () => {\r\n\r\n    const { onConfirm, onCancel, confirmState } = useConfirm();\r\n    const portalElement = document.getElementById('portal');\r\n\r\n    const component = confirmState.show ? (\r\n        <Dialog\r\n            fullWidth\r\n            maxWidth=\"xs\"\r\n            open={confirmState.show}\r\n            onClose={onCancel}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle sx={{ fontSize: '1rem' }} id=\"alert-dialog-title\">\r\n                {confirmState.title}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <DialogContentText sx={{ color: 'black' }} id=\"alert-dialog-description\">\r\n                    {confirmState.description}\r\n                </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={onCancel}>\r\n                    {confirmState.cancelButtonName}\r\n                </Button>\r\n                <Button variant=\"contained\" onClick={onConfirm}>\r\n                    {confirmState.confirmButtonName}\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    ) : null;\r\n\r\n    return createPortal(component, portalElement);\r\n}\r\n\r\nexport default ConfirmDialog;\r\n\r\n","import { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector } from 'react-redux';\r\nimport { useState, useEffect } from 'react';\r\n\r\nimport { \r\n    Dialog, \r\n    DialogContent, \r\n    DialogTitle,\r\n    Box,\r\n    Divider,\r\n    InputAdornment,\r\n    List,\r\n    ListItemButton,\r\n    ListItem,\r\n    ListItemAvatar,\r\n    ListItemText,\r\n    OutlinedInput,\r\n    Stack\r\n} from '@mui/material';\r\nimport { useTheme } from '@mui/material/styles';\r\n\r\n// icons\r\nimport { IconSearch } from '@tabler/icons';\r\n\r\n// const\r\nimport { baseURL } from 'store/constant';\r\n\r\nconst TestWorkflowDialog = ({\r\n    show,\r\n    dialogProps,\r\n    onCancel,\r\n    onItemClick,\r\n}) => {\r\n\r\n    const portalElement = document.getElementById('portal');\r\n    const theme = useTheme();\r\n    const customization = useSelector((state) => state.customization);\r\n\r\n    const [searchValue, setSearchValue] = useState('');\r\n    const [nodes, setNodes] = useState([]);\r\n\r\n    const filterSearch = (value) => {\r\n        setSearchValue(value);\r\n        setTimeout(() => {\r\n            if (value) {\r\n                const returnData = dialogProps.nodes.filter((nd) => nd.data.label.toLowerCase().includes(value.toLowerCase()));\r\n                setNodes(returnData);\r\n\r\n            } else if (value === '') {\r\n                setNodes(dialogProps.nodes);\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (dialogProps.nodes) {\r\n            setNodes(dialogProps.nodes);\r\n        }\r\n    }, [dialogProps]);\r\n\r\n    const component = show ? (\r\n        <Dialog\r\n            open={show}\r\n            fullWidth\r\n            maxWidth=\"md\"\r\n            onClose={onCancel}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n        >\r\n            <DialogTitle sx={{ fontSize: '1rem' }} id=\"alert-dialog-title\">\r\n                {dialogProps.title}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <Stack>\r\n                    <span>Select a starting point to test from. Workflow will be executed from the starting point till the end.</span>\r\n                </Stack>\r\n                <Box sx={{ p: 2 }}>\r\n                    <OutlinedInput\r\n                        sx={{ width: '100%', pr: 1, pl: 2, my: 2 }}\r\n                        id=\"input-search-node\"\r\n                        value={searchValue}\r\n                        onChange={(e) => filterSearch(e.target.value)}\r\n                        placeholder=\"Search nodes\"\r\n                        startAdornment={\r\n                            <InputAdornment position=\"start\">\r\n                                <IconSearch stroke={1.5} size=\"1rem\" color={theme.palette.grey[500]} />\r\n                            </InputAdornment>\r\n                        }\r\n                        aria-describedby=\"search-helper-text\"\r\n                        inputProps={{\r\n                            'aria-label': 'weight'\r\n                        }}\r\n                    />\r\n                    <Divider />\r\n                </Box>\r\n                <div>\r\n                    <Box sx={{ p: 2 }}>\r\n                        <List\r\n                            sx={{\r\n                                width: '100%',\r\n                                py: 0,\r\n                                borderRadius: '10px',\r\n                                [theme.breakpoints.down('md')]: {\r\n                                    maxWidth: 300\r\n                                },\r\n                                '& .MuiListItemSecondaryAction-root': {\r\n                                    top: 22\r\n                                },\r\n                                '& .MuiDivider-root': {\r\n                                    my: 0\r\n                                },\r\n                                '& .list-container': {\r\n                                    pl: 7\r\n                                }\r\n                            }}\r\n                        >\r\n                            {nodes.map((node) => (\r\n                                <div key={node.id}>\r\n                                    <ListItemButton\r\n                                        sx={{ p: 0, borderRadius: `${customization.borderRadius}px` }}\r\n                                        onClick={() => onItemClick(node.id)}\r\n                                    >\r\n                                        <ListItem alignItems=\"center\">\r\n                                            <ListItemAvatar>\r\n                                                <div style={{ width: 50, height: 50, borderRadius: '50%', backgroundColor: 'white' }}>\r\n                                                    <img style={{ width: '100%', height: '100%', padding: 10, objectFit: 'contain' }} alt={node.data.name} src={`${baseURL}/api/v1/node-icon/${node.data.name}`} />\r\n                                                </div>\r\n                                            </ListItemAvatar>\r\n                                            <ListItemText sx={{ ml: 1 }} primary={node.data.label} secondary={node.data.description} />\r\n                                        </ListItem>\r\n                                    </ListItemButton>\r\n                                    <Divider />\r\n                                </div>\r\n                            ))}\r\n                        </List>\r\n                    </Box>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    ) : null;\r\n\r\n    return createPortal(component, portalElement);\r\n}\r\n\r\nTestWorkflowDialog.propTypes = {\r\n    show: PropTypes.bool, \r\n    dialogProps: PropTypes.object,\r\n    onCancel: PropTypes.func,\r\n    onItemClick: PropTypes.func,\r\n};\r\n\r\nexport default TestWorkflowDialog;\r\n\r\n","import client from \"./client\";\r\n\r\nconst deleteAllTestWebhooks = () => client.post(`/remove-test-webhooks`);\r\n\r\nexport default {\r\n    deleteAllTestWebhooks,\r\n};\r\n","import { useEffect, useRef, useState, useCallback } from 'react';\r\nimport ReactFlow, {\r\n    ReactFlowProvider,\r\n    addEdge,\r\n    MiniMap,\r\n    Controls,\r\n    Background,\r\n    useNodesState,\r\n    useEdgesState,\r\n} from 'react-flow-renderer';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { usePrompt, useNavigate } from \"react-router-dom\";\r\nimport { \r\n    REMOVE_DIRTY, \r\n    SET_DIRTY, \r\n    SET_WORKFLOW,\r\n    enqueueSnackbar as enqueueSnackbarAction,\r\n    closeSnackbar as closeSnackbarAction,\r\n} from 'store/actions';\r\n\r\n// material-ui\r\nimport { Toolbar, Box, AppBar, Button, Fab, CircularProgress } from '@mui/material';\r\nimport { useTheme } from '@mui/material/styles';\r\n\r\n// project imports\r\nimport CanvasNode from './CanvasNode';\r\nimport ButtonEdge from './ButtonEdge';\r\nimport CanvasHeader from './CanvasHeader';\r\nimport AddNodes from './AddNodes';\r\nimport EditNodes from './EditNodes';\r\nimport ConfirmDialog from 'ui-component/dialog/ConfirmDialog';\r\nimport TestWorkflowDialog from 'ui-component/dialog/TestWorkflowDialog';\r\n\r\n// API\r\nimport nodesApi from \"api/nodes\";\r\nimport workflowsApi from \"api/workflows\";\r\nimport webhooksApi from \"api/webhooks\";\r\n\r\n// Hooks\r\nimport useApi from \"hooks/useApi\";\r\nimport useConfirm from \"hooks/useConfirm\";\r\n\r\n// icons\r\nimport { IconX, IconBolt } from '@tabler/icons';\r\n\r\n// third party\r\nimport socketIOClient from \"socket.io-client\";\r\n\r\n// utils\r\nimport { \r\n    generateWebhookEndpoint, \r\n    getUniqueNodeId, \r\n    checkIfNodeLabelUnique, \r\n    addAnchors,\r\n    getEdgeLabelName,\r\n    checkMultipleTriggers\r\n} from  'utils/genericHelper';\r\nimport useNotifier from 'utils/useNotifier';\r\n\r\n// const\r\nimport { baseURL } from 'store/constant';\r\n\r\nconst nodeTypes = { customNode: CanvasNode };\r\nconst edgeTypes = { buttonedge: ButtonEdge };\r\n\r\n// ==============================|| CANVAS ||============================== //\r\n\r\nconst Canvas = () => {\r\n\r\n    const theme = useTheme();\r\n    const navigate = useNavigate();\r\n\r\n    const URLpath = document.location.pathname.toString().split('/');\r\n    const workflowShortId = (URLpath[URLpath.length - 1] && URLpath[URLpath.length - 1].startsWith('W')) ? URLpath[URLpath.length - 1] : '';\r\n\r\n    const { confirm } = useConfirm();\r\n\r\n    const dispatch = useDispatch();\r\n    const canvas = useSelector((state) => state.canvas);\r\n    const [canvasDataStore, setCanvasDataStore] = useState(canvas);\r\n    const [workflow, setWorkflow] = useState(null);\r\n    const [isTestWorkflowDialogOpen, setTestWorkflowDialogOpen] = useState(false);\r\n    const [testWorkflowDialogProps, setTestWorkflowDialogProps] = useState({});\r\n    const [isTestingWorkflow, setIsTestingWorkflow] = useState(false);\r\n\r\n    // ==============================|| Snackbar ||============================== //\r\n\r\n    useNotifier();\r\n    const enqueueSnackbar = (...args) => dispatch(enqueueSnackbarAction(...args));\r\n    const closeSnackbar = (...args) => dispatch(closeSnackbarAction(...args));\r\n\r\n    // ==============================|| ReactFlow ||============================== //\r\n\r\n    const [nodes, setNodes, onNodesChange] = useNodesState();\r\n    const [edges, setEdges, onEdgesChange] = useEdgesState();\r\n   \r\n    const [rfInstance, setRfInstance] = useState(null);\r\n    const [selectedNode, setSelectedNode] = useState(null);\r\n   \r\n    const reactFlowWrapper = useRef(null);\r\n\r\n    // ==============================|| Workflow API ||============================== //\r\n\r\n    const getNodesApi = useApi(nodesApi.getAllNodes);\r\n    const removeTestTriggersApi = useApi(nodesApi.removeTestTriggers);\r\n    const deleteAllTestWebhooksApi = useApi(webhooksApi.deleteAllTestWebhooks);\r\n    const createNewWorkflowApi = useApi(workflowsApi.createNewWorkflow);\r\n    const testWorkflowApi = useApi(workflowsApi.testWorkflow);\r\n    const updateWorkflowApi = useApi(workflowsApi.updateWorkflow);\r\n    const getSpecificWorkflowApi = useApi(workflowsApi.getSpecificWorkflow);\r\n\r\n    // ==============================|| Events & Actions ||============================== //\r\n\r\n    const onConnect = (params) => {\r\n        const newEdge = { \r\n            ...params, \r\n            type: 'buttonedge', \r\n            id: `${params.source}-${params.sourceHandle}-${params.target}-${params.targetHandle}`,\r\n            data: { label: getEdgeLabelName(params.sourceHandle) }\r\n        };\r\n        setEdges((eds) => addEdge(newEdge, eds));\r\n        setDirty();\r\n    };\r\n\r\n    const handleTestWorkflow = () => {\r\n        try {\r\n            if (workflow.deployed) {\r\n                alert('Testing workflow requires stopping deployed workflow. Please stop deployed workflow first');\r\n                return;\r\n            }\r\n            const rfInstanceObject = rfInstance.toObject();\r\n            const nodes = rfInstanceObject.nodes || [];\r\n            setTestWorkflowDialogOpen(true);\r\n            setTestWorkflowDialogProps({\r\n                title: 'Test Workflow',\r\n                nodes: nodes.filter((nd) => !nd.id.includes('ifElse'))\r\n            });\r\n            \r\n        } catch(e) {\r\n            console.error(e);\r\n        }\r\n    }\r\n\r\n    const onStartingPointClick = (startingNodeId) => {\r\n        try {\r\n            const socket = socketIOClient(baseURL);\r\n            const rfInstanceObject = rfInstance.toObject();\r\n            const nodes = rfInstanceObject.nodes || [];\r\n            const edges = rfInstanceObject.edges || [];\r\n            setTestWorkflowDialogOpen(false);\r\n\r\n            socket.on('connect', () => {\r\n                const clientId = socket.id;\r\n                const node = nodes.find((nd) => nd.id === startingNodeId);\r\n                const nodeData = node.data;\r\n                const body = {\r\n                    nodes,\r\n                    edges,\r\n                    clientId,\r\n                    nodeData\r\n                };\r\n                testWorkflowApi.request(startingNodeId, body);\r\n                setNodes((nds) =>\r\n                    nds.map((node) => {\r\n                        node.data =  {\r\n                            ...node.data,\r\n                            outputResponses: {\r\n                                ...node.data.outputResponses,\r\n                                submit: null,\r\n                                needRetest: null,\r\n                            },\r\n                            selected: false,\r\n                        };\r\n                        return node;\r\n                    })\r\n                );\r\n                setIsTestingWorkflow(true);\r\n            });\r\n\r\n            socket.on('testWorkflowNodeResponse', (value) => {\r\n                const {\r\n                    nodeId,\r\n                    data,\r\n                    status\r\n                } = value;\r\n\r\n                const node = nodes.find((nd) => nd.id === nodeId);\r\n                if (node) {\r\n                    const outputValues = {\r\n                        submit: status === 'FINISHED' ? true : null,\r\n                        needRetest: status === 'FINISHED' ? null : true,\r\n                        output: data,\r\n                    };\r\n                    const nodeData = node.data;\r\n                    nodeData['outputResponses'] = outputValues;\r\n                    setNodes((nds) =>\r\n                        nds.map((node) => {\r\n                            if (node.id === nodeId) {\r\n                                node.data = {\r\n                                    ...nodeData,\r\n                                    selected: false,\r\n                                };\r\n                            }\r\n                            return node;\r\n                        })\r\n                    );\r\n                }\r\n            });\r\n\r\n            socket.on('testWorkflowNodeFinish', () => {\r\n                setIsTestingWorkflow(false);\r\n                socket.disconnect();\r\n            });\r\n\r\n        } catch(e) {\r\n            console.error(e);\r\n        }  \r\n    }\r\n\r\n    const handleLoadWorkflow = (file) => {\r\n        try {\r\n            const flowData = JSON.parse(file);\r\n            const nodes = flowData.nodes || [];\r\n\r\n            for (let i = 0; i < nodes.length; i+= 1) {\r\n                const nodeData = nodes[i].data;\r\n                if (nodeData.type === 'webhook') nodeData.webhookEndpoint = generateWebhookEndpoint();\r\n            }\r\n\r\n            setNodes(nodes);\r\n            setEdges(flowData.edges || []);\r\n            setDirty();\r\n\r\n        } catch(e) {\r\n            console.error(e);\r\n        }\r\n    }\r\n\r\n    const handleDeployWorkflow = async() => {\r\n        if (rfInstance) {\r\n\r\n            const rfInstanceObject = rfInstance.toObject();\r\n            const flowData = JSON.stringify(rfInstanceObject);\r\n            \r\n            try {\r\n                // Always save workflow first\r\n                let savedWorkflowResponse;\r\n                if (!workflow.shortId) {\r\n                    const newWorkflowBody = {\r\n                        name: workflow.name,\r\n                        deployed: false,\r\n                        flowData\r\n                    };\r\n                    const response = await workflowsApi.createNewWorkflow(newWorkflowBody)\r\n                    savedWorkflowResponse = response.data;\r\n                } else {\r\n                    const updateBody = {\r\n                        flowData\r\n                    };\r\n                    const response = await workflowsApi.updateWorkflow(workflow.shortId, updateBody)\r\n                    savedWorkflowResponse = response.data;\r\n                }\r\n\r\n                dispatch({ type: REMOVE_DIRTY });\r\n                \r\n                // Then deploy\r\n                const response = await workflowsApi.deployWorkflow(savedWorkflowResponse.shortId)\r\n                const deployedWorkflowResponse = response.data;\r\n                dispatch({ type: SET_WORKFLOW, workflow: deployedWorkflowResponse });\r\n\r\n                enqueueSnackbar({\r\n                    message: 'Workflow deployed!',\r\n                    options: {\r\n                        key: new Date().getTime() + Math.random(),\r\n                        variant: 'success',\r\n                        action: key => (\r\n                            <Button style={{color: 'white'}} onClick={() => closeSnackbar(key)}>\r\n                                <IconX />\r\n                            </Button>\r\n                        ),\r\n                    },\r\n                });\r\n\r\n            } catch (error) {\r\n                const errorData =  error.response.data || `${error.response.status}: ${error.response.statusText}`;\r\n                enqueueSnackbar({\r\n                    message: errorData,\r\n                    options: {\r\n                        key: new Date().getTime() + Math.random(),\r\n                        variant: 'error',\r\n                        persist: true,\r\n                        action: key => (\r\n                            <Button style={{color: 'white'}} onClick={() => closeSnackbar(key)}>\r\n                                <IconX />\r\n                            </Button>\r\n                        ),\r\n                    },\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleStopWorkflow = async() => {\r\n        try {\r\n            const response = await workflowsApi.deployWorkflow(workflow.shortId, { halt: true });\r\n            const stoppedWorkflowResponse = response.data;\r\n            dispatch({ type: SET_WORKFLOW, workflow: stoppedWorkflowResponse });\r\n\r\n            enqueueSnackbar({\r\n                message: 'Workflow stopped',\r\n                options: {\r\n                    key: new Date().getTime() + Math.random(),\r\n                    variant: 'success',\r\n                    action: key => (\r\n                        <Button style={{color: 'white'}} onClick={() => closeSnackbar(key)}>\r\n                            <IconX />\r\n                        </Button>\r\n                    ),\r\n                },\r\n            });\r\n\r\n        } catch (error) {\r\n            const errorData =  error.response.data || `${error.response.status}: ${error.response.statusText}`;\r\n            enqueueSnackbar({\r\n                message: errorData,\r\n                options: {\r\n                    key: new Date().getTime() + Math.random(),\r\n                    variant: 'error',\r\n                    persist: true,\r\n                    action: key => (\r\n                        <Button style={{color: 'white'}} onClick={() => closeSnackbar(key)}>\r\n                            <IconX />\r\n                        </Button>\r\n                    ),\r\n                },\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleDeleteWorkflow = async() => {\r\n        const confirmPayload = {\r\n            title: `Delete`,\r\n            description: `Delete workflow ${workflow.name}?`,\r\n            confirmButtonName: 'Delete',\r\n            cancelButtonName: 'Cancel'\r\n        }\r\n        const isConfirmed = await confirm(confirmPayload);\r\n\r\n        if (isConfirmed) {\r\n            try {\r\n                await workflowsApi.deleteWorkflow(workflow.shortId);\r\n                navigate(-1);\r\n    \r\n            } catch (error) {\r\n                const errorData =  error.response.data || `${error.response.status}: ${error.response.statusText}`;\r\n                enqueueSnackbar({\r\n                    message: errorData,\r\n                    options: {\r\n                        key: new Date().getTime() + Math.random(),\r\n                        variant: 'error',\r\n                        persist: true,\r\n                        action: key => (\r\n                            <Button style={{color: 'white'}} onClick={() => closeSnackbar(key)}>\r\n                                <IconX />\r\n                            </Button>\r\n                        ),\r\n                    },\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleSaveFlow = (workflowName) => {        \r\n        if (rfInstance) {\r\n\r\n            setNodes((nds) =>\r\n                nds.map((node) => {\r\n                    node.data =  {\r\n                        ...node.data,\r\n                        selected: false,\r\n                    };\r\n                    return node;\r\n                })\r\n            );\r\n\r\n            const rfInstanceObject = rfInstance.toObject();\r\n            const flowData = JSON.stringify(rfInstanceObject);\r\n            \r\n            if (!workflow.shortId) {\r\n                const newWorkflowBody = {\r\n                    name: workflowName,\r\n                    deployed: false,\r\n                    flowData\r\n                };\r\n                createNewWorkflowApi.request(newWorkflowBody);\r\n            } else {\r\n                const updateBody = {\r\n                    name: workflowName,\r\n                    flowData\r\n                };\r\n                updateWorkflowApi.request(workflow.shortId, updateBody);\r\n            }\r\n        }\r\n    };\r\n\r\n    // eslint-disable-next-line\r\n    const onNodeDoubleClick = useCallback((event, clickedNode) => {\r\n        setSelectedNode(clickedNode);\r\n        setNodes((nds) =>\r\n            nds.map((node) => {\r\n                if (node.id === clickedNode.id) {\r\n                    node.data =  {\r\n                        ...node.data,\r\n                        selected: true,\r\n                    };\r\n                } else {\r\n                    node.data =  {\r\n                        ...node.data,\r\n                        selected: false,\r\n                    };\r\n                }\r\n\r\n                return node;\r\n            })\r\n        );\r\n    });\r\n\r\n    // eslint-disable-next-line\r\n    const onNodeLabelUpdate = useCallback((nodeLabel) => {\r\n        setNodes((nds) =>\r\n            nds.map((node) => {\r\n                if (node.id === selectedNode.id) {\r\n                    if (!checkIfNodeLabelUnique(nodeLabel, rfInstance.getNodes())) {\r\n                        enqueueSnackbar({\r\n                            message: 'Duplicated node label',\r\n                            options: {\r\n                                key: new Date().getTime() + Math.random(),\r\n                                variant: 'error',\r\n                                persist: true,\r\n                                action: key => (\r\n                                    <Button style={{color: 'white'}} onClick={() => closeSnackbar(key)}>\r\n                                        <IconX />\r\n                                    </Button>\r\n                                ),\r\n                            },\r\n                        });\r\n                    } else {\r\n                        if (node.data.label !== nodeLabel) {\r\n                            setTimeout(() => setDirty(), 0);\r\n                        }\r\n                        node.data =  {\r\n                            ...node.data,\r\n                            label: nodeLabel,\r\n                        };\r\n                    }\r\n                }\r\n                return node;\r\n            })\r\n        );\r\n    });\r\n\r\n    // eslint-disable-next-line\r\n    const onNodeValuesUpdate = useCallback((nodeFlowData) => {\r\n        setNodes((nds) =>\r\n            nds.map((node) => {\r\n                if (node.id === selectedNode.id) {\r\n                    setTimeout(() => setDirty(), 0);\r\n                    node.data = {\r\n                        ...node.data,\r\n                        ...nodeFlowData,\r\n                        selected: true,\r\n                    };\r\n                }\r\n                return node;\r\n            })\r\n        );\r\n    });\r\n\r\n    const onDragOver = useCallback((event) => {\r\n        event.preventDefault();\r\n        event.dataTransfer.dropEffect = 'move';\r\n    }, []);\r\n    \r\n    const onDrop = useCallback(\r\n        (event) => {\r\n            event.preventDefault();\r\n            const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\r\n            let nodeData = event.dataTransfer.getData('application/reactflow');\r\n\r\n            // check if the dropped element is valid\r\n            if (typeof nodeData === 'undefined' || !nodeData) {\r\n                return;\r\n            }\r\n\r\n            nodeData = JSON.parse(nodeData);\r\n\r\n            // check if workflow contains multiple triggers/webhooks\r\n            if ((nodeData.type === 'webhook' || nodeData.type === 'trigger') && \r\n              checkMultipleTriggers(rfInstance.getNodes())) {\r\n                enqueueSnackbar({\r\n                    message: 'Workflow can only contains 1 trigger or webhook node',\r\n                    options: {\r\n                        key: new Date().getTime() + Math.random(),\r\n                        variant: 'error',\r\n                        persist: true,\r\n                        action: key => (\r\n                            <Button style={{color: 'white'}} onClick={() => closeSnackbar(key)}>\r\n                                <IconX />\r\n                            </Button>\r\n                        ),\r\n                    },\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (nodeData.type === 'webhook') nodeData.webhookEndpoint = generateWebhookEndpoint();\r\n\r\n            const position = rfInstance.project({\r\n                x: event.clientX - reactFlowBounds.left - 100,\r\n                y: event.clientY - reactFlowBounds.top - 50,\r\n            });\r\n\r\n            const newNodeId = getUniqueNodeId(nodeData, rfInstance.getNodes());\r\n         \r\n            const newNode = {\r\n                id: newNodeId,\r\n                position,\r\n                type: \"customNode\",\r\n                data: addAnchors(nodeData, rfInstance.getNodes(), newNodeId)\r\n            };\r\n\r\n            setSelectedNode(newNode);\r\n            setNodes((nds) =>\r\n                nds.concat(newNode).map((node) => {\r\n                    if (node.id === newNode.id) {\r\n                        node.data =  {\r\n                            ...node.data,\r\n                            selected: true,\r\n                        };\r\n                    } else {\r\n                        node.data =  {\r\n                            ...node.data,\r\n                            selected: false,\r\n                        };\r\n                    }\r\n\r\n                    return node;\r\n                })\r\n            );\r\n            setTimeout(() => setDirty(), 0);\r\n        },\r\n        \r\n        // eslint-disable-next-line\r\n        [rfInstance]\r\n    );\r\n\r\n    const saveWorkflowSuccess = () => {\r\n        dispatch({ type: REMOVE_DIRTY });\r\n        enqueueSnackbar({\r\n            message: 'Workflow saved',\r\n            options: {\r\n                key: new Date().getTime() + Math.random(),\r\n                variant: 'success',\r\n                action: key => (\r\n                    <Button style={{color: 'white'}} onClick={() => closeSnackbar(key)}>\r\n                        <IconX />\r\n                    </Button>\r\n                ),\r\n            },\r\n        });\r\n    };\r\n\r\n    const setDirty = () => {\r\n        dispatch({ type: SET_DIRTY });\r\n    }\r\n\r\n    // ==============================|| useEffect ||============================== //\r\n\r\n    // Get specific workflow successful\r\n    useEffect(() => {\r\n        if (getSpecificWorkflowApi.data) {\r\n            const workflow = getSpecificWorkflowApi.data;\r\n            const initialFlow = workflow.flowData ? JSON.parse(workflow.flowData) : [];\r\n            setNodes(initialFlow.nodes || []);\r\n            setEdges(initialFlow.edges || []);\r\n            dispatch({ type: SET_WORKFLOW, workflow });\r\n\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [getSpecificWorkflowApi.data]);\r\n\r\n\r\n    // Create new workflow successful\r\n    useEffect(() => {\r\n        if (createNewWorkflowApi.data) {\r\n            const workflow = createNewWorkflowApi.data;\r\n            dispatch({ type: SET_WORKFLOW, workflow });\r\n            saveWorkflowSuccess();\r\n            window.history.replaceState(null, null, `/canvas/${workflow.shortId}`)\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [createNewWorkflowApi.data]);\r\n\r\n\r\n    // Update workflow successful\r\n    useEffect(() => {\r\n        if (updateWorkflowApi.data) {\r\n            dispatch({ type: SET_WORKFLOW, workflow: updateWorkflowApi.data });\r\n            saveWorkflowSuccess();\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [updateWorkflowApi.data]);\r\n\r\n\r\n    // Test workflow failed\r\n    useEffect(() => {\r\n        if (testWorkflowApi.error) {\r\n            enqueueSnackbar({\r\n                message: 'Test workflow failed',\r\n                options: {\r\n                    key: new Date().getTime() + Math.random(),\r\n                    variant: 'error',\r\n                    persist: true,\r\n                    action: key => (\r\n                        <Button style={{color: 'white'}} onClick={() => closeSnackbar(key)}>\r\n                            <IconX />\r\n                        </Button>\r\n                    ),\r\n                },\r\n            });\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [testWorkflowApi.error]);\r\n\r\n\r\n    // Listen to edge button click remove redux event\r\n    useEffect(() => {\r\n        if (rfInstance) {\r\n            const edges = rfInstance.getEdges();\r\n            setEdges(edges.filter(edge => edge.id !== canvasDataStore.removeEdgeId));\r\n            setDirty();\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [canvasDataStore.removeEdgeId]);\r\n\r\n\r\n    useEffect(() => setWorkflow(canvasDataStore.workflow), [canvasDataStore.workflow]);\r\n\r\n    // Initialization\r\n    useEffect(() => {\r\n        removeTestTriggersApi.request();\r\n        deleteAllTestWebhooksApi.request();\r\n\r\n        if (workflowShortId) {\r\n            getSpecificWorkflowApi.request(workflowShortId);\r\n\r\n        } else {\r\n            setNodes([]);\r\n            setEdges([]);\r\n            dispatch({ \r\n                type: SET_WORKFLOW, \r\n                workflow: {\r\n                    name: 'Untitled workflow',\r\n                }\r\n            });\r\n        }\r\n\r\n        getNodesApi.request();\r\n     \r\n        // Clear dirty state before leaving and remove any ongoing test triggers and webhooks\r\n        return () => {\r\n            removeTestTriggersApi.request();\r\n            deleteAllTestWebhooksApi.request();\r\n\r\n            setTimeout(() => dispatch({ type: REMOVE_DIRTY }), 0);\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n\r\n    useEffect(() => {\r\n        setCanvasDataStore(canvas)\r\n    }, [canvas]);\r\n\r\n    usePrompt( 'You have unsaved changes! Do you want to navigate away?', canvasDataStore.isDirty );\r\n    \r\n    return (\r\n    <>\r\n        <Box>\r\n            <AppBar\r\n                enableColorOnDark\r\n                position=\"fixed\"\r\n                color=\"inherit\"\r\n                elevation={1}\r\n                sx={{\r\n                    bgcolor: theme.palette.background.default,\r\n                }}\r\n            >\r\n                <Toolbar>\r\n                    <CanvasHeader \r\n                        workflow={workflow} \r\n                        handleSaveFlow={handleSaveFlow} \r\n                        handleDeployWorkflow={handleDeployWorkflow}\r\n                        handleStopWorkflow={handleStopWorkflow}\r\n                        handleDeleteWorkflow={handleDeleteWorkflow}\r\n                        handleLoadWorkflow={handleLoadWorkflow}\r\n                    />\r\n                </Toolbar>\r\n            </AppBar>\r\n            <Box sx={{ marginTop: '70px', height: '90vh', width: '100%' }} >\r\n                <div className=\"reactflow-parent-wrapper\">\r\n                    <ReactFlowProvider>\r\n                        <div className=\"reactflow-wrapper\" ref={reactFlowWrapper}>\r\n                            <ReactFlow\r\n                                nodes={nodes}\r\n                                edges={edges}\r\n                                onNodesChange={onNodesChange}\r\n                                onNodeDoubleClick={onNodeDoubleClick}\r\n                                onEdgesChange={onEdgesChange}\r\n                                onDrop={onDrop}\r\n                                onDragOver={onDragOver}\r\n                                onNodeDragStop={setDirty}\r\n                                nodeTypes={nodeTypes}\r\n                                edgeTypes={edgeTypes}\r\n                                onConnect={onConnect}\r\n                                onInit={setRfInstance}\r\n                                fitView\r\n                            >\r\n                                <MiniMap\r\n                                    nodeStrokeColor={() => theme.palette.primary.main }\r\n                                    nodeColor={() => theme.palette.primary.main }\r\n                                    nodeBorderRadius={2}\r\n                                />\r\n                                <Controls \r\n                                    style={{\r\n                                        display: 'flex',\r\n                                        flexDirection: 'row',\r\n                                        left: '50%',\r\n                                        transform: 'translate(-50%, -50%)'\r\n                                    }}\r\n                                />\r\n                                <Background color=\"#aaa\" gap={16} />\r\n                                <AddNodes \r\n                                    nodesData={getNodesApi.data} \r\n                                    node={selectedNode} \r\n                                />\r\n                                <EditNodes \r\n                                    nodes={nodes} \r\n                                    edges={edges} \r\n                                    node={selectedNode} \r\n                                    workflow={workflow} \r\n                                    onNodeLabelUpdate={onNodeLabelUpdate} \r\n                                    onNodeValuesUpdate={onNodeValuesUpdate} \r\n                                />\r\n                                <Fab \r\n                                    sx={{ position: 'absolute', right: 20, top: 20,}} \r\n                                    size=\"small\" \r\n                                    color=\"warning\"\r\n                                    aria-label=\"test\" \r\n                                    title=\"Test Workflow\"\r\n                                    disabled={isTestingWorkflow}\r\n                                    onClick={handleTestWorkflow}\r\n                                >\r\n                                    {<IconBolt />}\r\n                                </Fab>\r\n                                {isTestingWorkflow && (\r\n                                    <CircularProgress\r\n                                        size={50}\r\n                                        sx={{\r\n                                            color: theme.palette.warning.dark,\r\n                                            position: 'absolute',\r\n                                            right: 15,\r\n                                            top: 15,\r\n                                        }}\r\n                                    />\r\n                                )}\r\n                            </ReactFlow>\r\n                        </div>\r\n                    </ReactFlowProvider>\r\n                </div>\r\n            </Box>\r\n            <ConfirmDialog />\r\n            <TestWorkflowDialog\r\n                show={isTestWorkflowDialogOpen}\r\n                dialogProps={testWorkflowDialogProps}\r\n                onCancel={() => setTestWorkflowDialogOpen(false)}\r\n                onItemClick={onStartingPointClick}\r\n            />\r\n        </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Canvas;\r\n"],"sourceRoot":""}